"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(self["webpackChunk_N_E"] = self["webpackChunk_N_E"] || []).push([["_app-pages-browser_node_modules_thirdweb-dev_wallets_evm_connectors_paper_dist_thirdweb-dev-w-4f4854"],{

/***/ "(app-pages-browser)/./node_modules/@thirdweb-dev/wallets/evm/connectors/paper/dist/thirdweb-dev-wallets-evm-connectors-paper.browser.esm.js":
/*!*******************************************************************************************************************************!*\
  !*** ./node_modules/@thirdweb-dev/wallets/evm/connectors/paper/dist/thirdweb-dev-wallets-evm-connectors-paper.browser.esm.js ***!
  \*******************************************************************************************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   PaperWalletConnector: function() { return /* binding */ PaperWalletConnector; }\n/* harmony export */ });\n/* harmony import */ var _dist_classPrivateFieldSet_a5db7c83_browser_esm_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../../dist/classPrivateFieldSet-a5db7c83.browser.esm.js */ \"(app-pages-browser)/./node_modules/@thirdweb-dev/wallets/dist/classPrivateFieldSet-a5db7c83.browser.esm.js\");\n/* harmony import */ var _dist_defineProperty_c8ecdc07_browser_esm_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../../dist/defineProperty-c8ecdc07.browser.esm.js */ \"(app-pages-browser)/./node_modules/@thirdweb-dev/wallets/dist/defineProperty-c8ecdc07.browser.esm.js\");\n/* harmony import */ var _paperxyz_embedded_wallet_service_sdk__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @paperxyz/embedded-wallet-service-sdk */ \"(app-pages-browser)/./node_modules/@paperxyz/embedded-wallet-service-sdk/dist/index.mjs\");\n/* harmony import */ var ethers__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ethers */ \"(app-pages-browser)/./node_modules/@ethersproject/address/lib.esm/index.js\");\n/* harmony import */ var _dist_walletIds_a64268ca_browser_esm_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../../dist/walletIds-a64268ca.browser.esm.js */ \"(app-pages-browser)/./node_modules/@thirdweb-dev/wallets/dist/walletIds-a64268ca.browser.esm.js\");\n/* harmony import */ var _dist_connector_05689d68_browser_esm_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../../dist/connector-05689d68.browser.esm.js */ \"(app-pages-browser)/./node_modules/@thirdweb-dev/wallets/dist/connector-05689d68.browser.esm.js\");\n/* harmony import */ var _dist_normalizeChainId_e4cc0175_browser_esm_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../../../dist/normalizeChainId-e4cc0175.browser.esm.js */ \"(app-pages-browser)/./node_modules/@thirdweb-dev/wallets/dist/normalizeChainId-e4cc0175.browser.esm.js\");\n/* harmony import */ var eventemitter3__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! eventemitter3 */ \"(app-pages-browser)/./node_modules/@thirdweb-dev/wallets/node_modules/eventemitter3/index.mjs\");\n\n\n\n\n\n\n\n\n\nvar _signer = /*#__PURE__*/new WeakMap();\nclass PaperWalletConnector extends _dist_connector_05689d68_browser_esm_js__WEBPACK_IMPORTED_MODULE_2__.C {\n  constructor(options) {\n    super();\n    (0,_dist_defineProperty_c8ecdc07_browser_esm_js__WEBPACK_IMPORTED_MODULE_3__._)(this, \"id\", _dist_walletIds_a64268ca_browser_esm_js__WEBPACK_IMPORTED_MODULE_4__.w.paper);\n    (0,_dist_defineProperty_c8ecdc07_browser_esm_js__WEBPACK_IMPORTED_MODULE_3__._)(this, \"name\", \"Paper Wallet\");\n    (0,_dist_defineProperty_c8ecdc07_browser_esm_js__WEBPACK_IMPORTED_MODULE_3__._)(this, \"ready\", true);\n    (0,_dist_defineProperty_c8ecdc07_browser_esm_js__WEBPACK_IMPORTED_MODULE_3__._)(this, \"user\", null);\n    (0,_dist_classPrivateFieldSet_a5db7c83_browser_esm_js__WEBPACK_IMPORTED_MODULE_5__._)(this, _signer, {\n      writable: true,\n      value: void 0\n    });\n    (0,_dist_defineProperty_c8ecdc07_browser_esm_js__WEBPACK_IMPORTED_MODULE_3__._)(this, \"onAccountsChanged\", async accounts => {\n      if (accounts.length === 0) {\n        await this.onDisconnect();\n      } else {\n        this.emit(\"change\", {\n          account: ethers__WEBPACK_IMPORTED_MODULE_6__.getAddress(accounts[0])\n        });\n      }\n    });\n    (0,_dist_defineProperty_c8ecdc07_browser_esm_js__WEBPACK_IMPORTED_MODULE_3__._)(this, \"onChainChanged\", chainId => {\n      const id = (0,_dist_normalizeChainId_e4cc0175_browser_esm_js__WEBPACK_IMPORTED_MODULE_7__.n)(chainId);\n      const unsupported = this.options.chains.findIndex(c => c.chainId === id) === -1;\n      this.emit(\"change\", {\n        chain: {\n          id,\n          unsupported\n        }\n      });\n    });\n    (0,_dist_defineProperty_c8ecdc07_browser_esm_js__WEBPACK_IMPORTED_MODULE_3__._)(this, \"onDisconnect\", async () => {\n      this.emit(\"disconnect\");\n    });\n    this.options = options;\n  }\n  getPaperSDK() {\n    if (!this.paper) {\n      this.paper = new Promise(async (resolve, reject) => {\n        const recoveryMethod = this.options.advancedOptions?.recoveryShareManagement;\n        try {\n          const {\n            PaperEmbeddedWalletSdk\n          } = await Promise.resolve(/*! import() */).then(__webpack_require__.bind(__webpack_require__, /*! @paperxyz/embedded-wallet-service-sdk */ \"(app-pages-browser)/./node_modules/@paperxyz/embedded-wallet-service-sdk/dist/index.mjs\"));\n          const methodToEnum = {\n            AWS_MANAGED: _paperxyz_embedded_wallet_service_sdk__WEBPACK_IMPORTED_MODULE_0__.RecoveryShareManagement.AWS_MANAGED,\n            USER_MANAGED: _paperxyz_embedded_wallet_service_sdk__WEBPACK_IMPORTED_MODULE_0__.RecoveryShareManagement.USER_MANAGED\n          };\n          const recoveryShareManagement = recoveryMethod ? methodToEnum[recoveryMethod] : undefined;\n          resolve(new PaperEmbeddedWalletSdk({\n            advancedOptions: {\n              recoveryShareManagement\n            },\n            clientId: this.options.clientId,\n            chain: \"Ethereum\",\n            styles: this.options.styles\n          }));\n        } catch (err) {\n          reject(err);\n        }\n      });\n    }\n    return this.paper;\n  }\n  async connect(options) {\n    const paperSDK = await this.getPaperSDK();\n    if (!paperSDK) {\n      throw new Error(\"Paper SDK not initialized\");\n    }\n    const user = await paperSDK.getUser();\n    switch (user.status) {\n      case _paperxyz_embedded_wallet_service_sdk__WEBPACK_IMPORTED_MODULE_0__.UserStatus.LOGGED_OUT:\n        {\n          let authResult;\n\n          // Show Google popup\n          if (options?.googleLogin) {\n            const arg = options.googleLogin;\n            authResult = await paperSDK.auth.loginWithGoogle(typeof arg === \"object\" ? arg : undefined);\n          }\n\n          // Headless\n          else if (options?.email && options?.otp) {\n            authResult = await paperSDK.auth.verifyPaperEmailLoginOtp({\n              email: options.email,\n              otp: options.otp,\n              recoveryCode: options.recoveryCode\n            });\n          }\n\n          // Show OTP modal\n          else if (options?.email) {\n            authResult = await paperSDK.auth.loginWithPaperEmailOtp({\n              email: options.email\n            });\n          }\n\n          // Show Full Modal\n          else {\n            authResult = await paperSDK.auth.loginWithPaperModal();\n          }\n          this.user = authResult.user;\n          break;\n        }\n      case _paperxyz_embedded_wallet_service_sdk__WEBPACK_IMPORTED_MODULE_0__.UserStatus.LOGGED_IN_WALLET_INITIALIZED:\n        {\n          if (typeof options?.googleLogin === \"object\") {\n            if (options.googleLogin.closeOpenedWindow && options.googleLogin.openedWindow) {\n              options.googleLogin.closeOpenedWindow(options.googleLogin.openedWindow);\n            }\n          }\n          this.user = user;\n          break;\n        }\n    }\n    if (!this.user) {\n      throw new Error(\"Error connecting User\");\n    }\n    if (options?.chainId) {\n      this.switchChain(options.chainId);\n    }\n    this.setupListeners();\n    return this.getAddress();\n  }\n  async disconnect() {\n    const paper = await this.paper;\n    await paper?.auth.logout();\n    (0,_dist_classPrivateFieldSet_a5db7c83_browser_esm_js__WEBPACK_IMPORTED_MODULE_5__.a)(this, _signer, undefined);\n    this.user = null;\n  }\n  async getAddress() {\n    const signer = await this.getSigner();\n    return signer.getAddress();\n  }\n  async isConnected() {\n    try {\n      const addr = await this.getAddress();\n      return !!addr;\n    } catch (e) {\n      return false;\n    }\n  }\n  async getProvider() {\n    const signer = await this.getSigner();\n    if (!signer.provider) {\n      throw new Error(\"Provider not found\");\n    }\n    return signer.provider;\n  }\n  async getSigner() {\n    if ((0,_dist_classPrivateFieldSet_a5db7c83_browser_esm_js__WEBPACK_IMPORTED_MODULE_5__.b)(this, _signer)) {\n      return (0,_dist_classPrivateFieldSet_a5db7c83_browser_esm_js__WEBPACK_IMPORTED_MODULE_5__.b)(this, _signer);\n    }\n    if (!this.user) {\n      const paperSDK = await this.getPaperSDK();\n      const user = await paperSDK.getUser();\n      switch (user.status) {\n        case _paperxyz_embedded_wallet_service_sdk__WEBPACK_IMPORTED_MODULE_0__.UserStatus.LOGGED_IN_WALLET_INITIALIZED:\n          {\n            this.user = user;\n            break;\n          }\n      }\n    }\n    const signer = await this.user?.wallet.getEthersJsSigner({\n      rpcEndpoint: this.options.chain.rpc[0] || \"\" // TODO: handle chain.rpc being empty array\n    });\n\n    if (!signer) {\n      throw new Error(\"Signer not found\");\n    }\n    (0,_dist_classPrivateFieldSet_a5db7c83_browser_esm_js__WEBPACK_IMPORTED_MODULE_5__.a)(this, _signer, signer);\n    return signer;\n  }\n  async isAuthorized() {\n    return false;\n  }\n  async switchChain(chainId) {\n    const chain = this.options.chains.find(c => c.chainId === chainId);\n    if (!chain) {\n      throw new Error(\"Chain not configured\");\n    }\n\n    // update chain in wallet\n    await this.user?.wallet.setChain({\n      chain: \"Ethereum\"\n    }); // just pass Ethereum no matter what chain we are going to connect\n\n    // update signer\n    (0,_dist_classPrivateFieldSet_a5db7c83_browser_esm_js__WEBPACK_IMPORTED_MODULE_5__.a)(this, _signer, await this.user?.wallet.getEthersJsSigner({\n      rpcEndpoint: chain.rpc[0] || \"\" // TODO: handle chain.rpc being empty array\n    }));\n\n    this.emit(\"change\", {\n      chain: {\n        id: chainId,\n        unsupported: false\n      }\n    });\n  }\n\n  // private getUser() {\n  //   if (!this.user) {\n  //     throw new Error(\"User not found\");\n  //   }\n  //   return this.user;\n  // }\n\n  async setupListeners() {\n    const provider = await this.getProvider();\n    if (provider.on) {\n      provider.on(\"accountsChanged\", this.onAccountsChanged);\n      provider.on(\"chainChanged\", this.onChainChanged);\n      provider.on(\"disconnect\", this.onDisconnect);\n    }\n  }\n  updateChains(chains) {\n    this.options.chains = chains;\n  }\n  async getEmail() {\n    await this.getProvider();\n    if (!this.user) {\n      throw new Error(\"No user found, Paper Wallet is not connected\");\n    }\n    return this.user.authDetails.email;\n  }\n}\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL25vZGVfbW9kdWxlcy9AdGhpcmR3ZWItZGV2L3dhbGxldHMvZXZtL2Nvbm5lY3RvcnMvcGFwZXIvZGlzdC90aGlyZHdlYi1kZXYtd2FsbGV0cy1ldm0tY29ubmVjdG9ycy1wYXBlci5icm93c2VyLmVzbS5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7QUFBd0s7QUFDekU7QUFDSDtBQUM3RDtBQUNxRDtBQUNBO0FBQ2M7QUFDM0U7O0FBRXZCO0FBQ0EsbUNBQW1DLHNFQUFTO0FBQzVDO0FBQ0E7QUFDQSxJQUFJLCtFQUFlLGFBQWEsc0VBQVM7QUFDekMsSUFBSSwrRUFBZTtBQUNuQixJQUFJLCtFQUFlO0FBQ25CLElBQUksK0VBQWU7QUFDbkIsSUFBSSxxRkFBMEI7QUFDOUI7QUFDQTtBQUNBLEtBQUs7QUFDTCxJQUFJLCtFQUFlO0FBQ25CO0FBQ0E7QUFDQSxRQUFRO0FBQ1I7QUFDQSxtQkFBbUIsOENBQWdCO0FBQ25DLFNBQVM7QUFDVDtBQUNBLEtBQUs7QUFDTCxJQUFJLCtFQUFlO0FBQ25CLGlCQUFpQixpRkFBZ0I7QUFDakM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQLEtBQUs7QUFDTCxJQUFJLCtFQUFlO0FBQ25CO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFlBQVksUUFBUSw0TkFBK0M7QUFDbkU7QUFDQSx5QkFBeUIsMEZBQXVCO0FBQ2hELDBCQUEwQiwwRkFBdUI7QUFDakQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQSxXQUFXO0FBQ1gsVUFBVTtBQUNWO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXLDZFQUFVO0FBQ3JCO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXLDZFQUFVO0FBQ3JCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSSxxRkFBcUI7QUFDekI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVEscUZBQXFCO0FBQzdCLGFBQWEscUZBQXFCO0FBQ2xDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhLDZFQUFVO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLOztBQUVMO0FBQ0E7QUFDQTtBQUNBLElBQUkscUZBQXFCO0FBQ3pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLEtBQUssR0FBRzs7QUFFUjtBQUNBLElBQUkscUZBQXFCO0FBQ3pCO0FBQ0EsS0FBSzs7QUFFTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFZ0MiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9fTl9FLy4vbm9kZV9tb2R1bGVzL0B0aGlyZHdlYi1kZXYvd2FsbGV0cy9ldm0vY29ubmVjdG9ycy9wYXBlci9kaXN0L3RoaXJkd2ViLWRldi13YWxsZXRzLWV2bS1jb25uZWN0b3JzLXBhcGVyLmJyb3dzZXIuZXNtLmpzPzgwNDAiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgXyBhcyBfY2xhc3NQcml2YXRlRmllbGRJbml0U3BlYywgYSBhcyBfY2xhc3NQcml2YXRlRmllbGRTZXQsIGIgYXMgX2NsYXNzUHJpdmF0ZUZpZWxkR2V0IH0gZnJvbSAnLi4vLi4vLi4vLi4vZGlzdC9jbGFzc1ByaXZhdGVGaWVsZFNldC1hNWRiN2M4My5icm93c2VyLmVzbS5qcyc7XG5pbXBvcnQgeyBfIGFzIF9kZWZpbmVQcm9wZXJ0eSB9IGZyb20gJy4uLy4uLy4uLy4uL2Rpc3QvZGVmaW5lUHJvcGVydHktYzhlY2RjMDcuYnJvd3Nlci5lc20uanMnO1xuaW1wb3J0IHsgUmVjb3ZlcnlTaGFyZU1hbmFnZW1lbnQsIFVzZXJTdGF0dXMgfSBmcm9tICdAcGFwZXJ4eXovZW1iZWRkZWQtd2FsbGV0LXNlcnZpY2Utc2RrJztcbmltcG9ydCB7IHV0aWxzIH0gZnJvbSAnZXRoZXJzJztcbmltcG9ydCB7IHcgYXMgd2FsbGV0SWRzIH0gZnJvbSAnLi4vLi4vLi4vLi4vZGlzdC93YWxsZXRJZHMtYTY0MjY4Y2EuYnJvd3Nlci5lc20uanMnO1xuaW1wb3J0IHsgQyBhcyBDb25uZWN0b3IgfSBmcm9tICcuLi8uLi8uLi8uLi9kaXN0L2Nvbm5lY3Rvci0wNTY4OWQ2OC5icm93c2VyLmVzbS5qcyc7XG5pbXBvcnQgeyBuIGFzIG5vcm1hbGl6ZUNoYWluSWQgfSBmcm9tICcuLi8uLi8uLi8uLi9kaXN0L25vcm1hbGl6ZUNoYWluSWQtZTRjYzAxNzUuYnJvd3Nlci5lc20uanMnO1xuaW1wb3J0ICdldmVudGVtaXR0ZXIzJztcblxudmFyIF9zaWduZXIgPSAvKiNfX1BVUkVfXyovbmV3IFdlYWtNYXAoKTtcbmNsYXNzIFBhcGVyV2FsbGV0Q29ubmVjdG9yIGV4dGVuZHMgQ29ubmVjdG9yIHtcbiAgY29uc3RydWN0b3Iob3B0aW9ucykge1xuICAgIHN1cGVyKCk7XG4gICAgX2RlZmluZVByb3BlcnR5KHRoaXMsIFwiaWRcIiwgd2FsbGV0SWRzLnBhcGVyKTtcbiAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgXCJuYW1lXCIsIFwiUGFwZXIgV2FsbGV0XCIpO1xuICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcInJlYWR5XCIsIHRydWUpO1xuICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcInVzZXJcIiwgbnVsbCk7XG4gICAgX2NsYXNzUHJpdmF0ZUZpZWxkSW5pdFNwZWModGhpcywgX3NpZ25lciwge1xuICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICB2YWx1ZTogdm9pZCAwXG4gICAgfSk7XG4gICAgX2RlZmluZVByb3BlcnR5KHRoaXMsIFwib25BY2NvdW50c0NoYW5nZWRcIiwgYXN5bmMgYWNjb3VudHMgPT4ge1xuICAgICAgaWYgKGFjY291bnRzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICBhd2FpdCB0aGlzLm9uRGlzY29ubmVjdCgpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5lbWl0KFwiY2hhbmdlXCIsIHtcbiAgICAgICAgICBhY2NvdW50OiB1dGlscy5nZXRBZGRyZXNzKGFjY291bnRzWzBdKVxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9KTtcbiAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgXCJvbkNoYWluQ2hhbmdlZFwiLCBjaGFpbklkID0+IHtcbiAgICAgIGNvbnN0IGlkID0gbm9ybWFsaXplQ2hhaW5JZChjaGFpbklkKTtcbiAgICAgIGNvbnN0IHVuc3VwcG9ydGVkID0gdGhpcy5vcHRpb25zLmNoYWlucy5maW5kSW5kZXgoYyA9PiBjLmNoYWluSWQgPT09IGlkKSA9PT0gLTE7XG4gICAgICB0aGlzLmVtaXQoXCJjaGFuZ2VcIiwge1xuICAgICAgICBjaGFpbjoge1xuICAgICAgICAgIGlkLFxuICAgICAgICAgIHVuc3VwcG9ydGVkXG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH0pO1xuICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcIm9uRGlzY29ubmVjdFwiLCBhc3luYyAoKSA9PiB7XG4gICAgICB0aGlzLmVtaXQoXCJkaXNjb25uZWN0XCIpO1xuICAgIH0pO1xuICAgIHRoaXMub3B0aW9ucyA9IG9wdGlvbnM7XG4gIH1cbiAgZ2V0UGFwZXJTREsoKSB7XG4gICAgaWYgKCF0aGlzLnBhcGVyKSB7XG4gICAgICB0aGlzLnBhcGVyID0gbmV3IFByb21pc2UoYXN5bmMgKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgICBjb25zdCByZWNvdmVyeU1ldGhvZCA9IHRoaXMub3B0aW9ucy5hZHZhbmNlZE9wdGlvbnM/LnJlY292ZXJ5U2hhcmVNYW5hZ2VtZW50O1xuICAgICAgICB0cnkge1xuICAgICAgICAgIGNvbnN0IHtcbiAgICAgICAgICAgIFBhcGVyRW1iZWRkZWRXYWxsZXRTZGtcbiAgICAgICAgICB9ID0gYXdhaXQgaW1wb3J0KCdAcGFwZXJ4eXovZW1iZWRkZWQtd2FsbGV0LXNlcnZpY2Utc2RrJyk7XG4gICAgICAgICAgY29uc3QgbWV0aG9kVG9FbnVtID0ge1xuICAgICAgICAgICAgQVdTX01BTkFHRUQ6IFJlY292ZXJ5U2hhcmVNYW5hZ2VtZW50LkFXU19NQU5BR0VELFxuICAgICAgICAgICAgVVNFUl9NQU5BR0VEOiBSZWNvdmVyeVNoYXJlTWFuYWdlbWVudC5VU0VSX01BTkFHRURcbiAgICAgICAgICB9O1xuICAgICAgICAgIGNvbnN0IHJlY292ZXJ5U2hhcmVNYW5hZ2VtZW50ID0gcmVjb3ZlcnlNZXRob2QgPyBtZXRob2RUb0VudW1bcmVjb3ZlcnlNZXRob2RdIDogdW5kZWZpbmVkO1xuICAgICAgICAgIHJlc29sdmUobmV3IFBhcGVyRW1iZWRkZWRXYWxsZXRTZGsoe1xuICAgICAgICAgICAgYWR2YW5jZWRPcHRpb25zOiB7XG4gICAgICAgICAgICAgIHJlY292ZXJ5U2hhcmVNYW5hZ2VtZW50XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgY2xpZW50SWQ6IHRoaXMub3B0aW9ucy5jbGllbnRJZCxcbiAgICAgICAgICAgIGNoYWluOiBcIkV0aGVyZXVtXCIsXG4gICAgICAgICAgICBzdHlsZXM6IHRoaXMub3B0aW9ucy5zdHlsZXNcbiAgICAgICAgICB9KSk7XG4gICAgICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICAgIHJlamVjdChlcnIpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMucGFwZXI7XG4gIH1cbiAgYXN5bmMgY29ubmVjdChvcHRpb25zKSB7XG4gICAgY29uc3QgcGFwZXJTREsgPSBhd2FpdCB0aGlzLmdldFBhcGVyU0RLKCk7XG4gICAgaWYgKCFwYXBlclNESykge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiUGFwZXIgU0RLIG5vdCBpbml0aWFsaXplZFwiKTtcbiAgICB9XG4gICAgY29uc3QgdXNlciA9IGF3YWl0IHBhcGVyU0RLLmdldFVzZXIoKTtcbiAgICBzd2l0Y2ggKHVzZXIuc3RhdHVzKSB7XG4gICAgICBjYXNlIFVzZXJTdGF0dXMuTE9HR0VEX09VVDpcbiAgICAgICAge1xuICAgICAgICAgIGxldCBhdXRoUmVzdWx0O1xuXG4gICAgICAgICAgLy8gU2hvdyBHb29nbGUgcG9wdXBcbiAgICAgICAgICBpZiAob3B0aW9ucz8uZ29vZ2xlTG9naW4pIHtcbiAgICAgICAgICAgIGNvbnN0IGFyZyA9IG9wdGlvbnMuZ29vZ2xlTG9naW47XG4gICAgICAgICAgICBhdXRoUmVzdWx0ID0gYXdhaXQgcGFwZXJTREsuYXV0aC5sb2dpbldpdGhHb29nbGUodHlwZW9mIGFyZyA9PT0gXCJvYmplY3RcIiA/IGFyZyA6IHVuZGVmaW5lZCk7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgLy8gSGVhZGxlc3NcbiAgICAgICAgICBlbHNlIGlmIChvcHRpb25zPy5lbWFpbCAmJiBvcHRpb25zPy5vdHApIHtcbiAgICAgICAgICAgIGF1dGhSZXN1bHQgPSBhd2FpdCBwYXBlclNESy5hdXRoLnZlcmlmeVBhcGVyRW1haWxMb2dpbk90cCh7XG4gICAgICAgICAgICAgIGVtYWlsOiBvcHRpb25zLmVtYWlsLFxuICAgICAgICAgICAgICBvdHA6IG9wdGlvbnMub3RwLFxuICAgICAgICAgICAgICByZWNvdmVyeUNvZGU6IG9wdGlvbnMucmVjb3ZlcnlDb2RlXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICAvLyBTaG93IE9UUCBtb2RhbFxuICAgICAgICAgIGVsc2UgaWYgKG9wdGlvbnM/LmVtYWlsKSB7XG4gICAgICAgICAgICBhdXRoUmVzdWx0ID0gYXdhaXQgcGFwZXJTREsuYXV0aC5sb2dpbldpdGhQYXBlckVtYWlsT3RwKHtcbiAgICAgICAgICAgICAgZW1haWw6IG9wdGlvbnMuZW1haWxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIC8vIFNob3cgRnVsbCBNb2RhbFxuICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgYXV0aFJlc3VsdCA9IGF3YWl0IHBhcGVyU0RLLmF1dGgubG9naW5XaXRoUGFwZXJNb2RhbCgpO1xuICAgICAgICAgIH1cbiAgICAgICAgICB0aGlzLnVzZXIgPSBhdXRoUmVzdWx0LnVzZXI7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgIGNhc2UgVXNlclN0YXR1cy5MT0dHRURfSU5fV0FMTEVUX0lOSVRJQUxJWkVEOlxuICAgICAgICB7XG4gICAgICAgICAgaWYgKHR5cGVvZiBvcHRpb25zPy5nb29nbGVMb2dpbiA9PT0gXCJvYmplY3RcIikge1xuICAgICAgICAgICAgaWYgKG9wdGlvbnMuZ29vZ2xlTG9naW4uY2xvc2VPcGVuZWRXaW5kb3cgJiYgb3B0aW9ucy5nb29nbGVMb2dpbi5vcGVuZWRXaW5kb3cpIHtcbiAgICAgICAgICAgICAgb3B0aW9ucy5nb29nbGVMb2dpbi5jbG9zZU9wZW5lZFdpbmRvdyhvcHRpb25zLmdvb2dsZUxvZ2luLm9wZW5lZFdpbmRvdyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICAgIHRoaXMudXNlciA9IHVzZXI7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICB9XG4gICAgaWYgKCF0aGlzLnVzZXIpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIkVycm9yIGNvbm5lY3RpbmcgVXNlclwiKTtcbiAgICB9XG4gICAgaWYgKG9wdGlvbnM/LmNoYWluSWQpIHtcbiAgICAgIHRoaXMuc3dpdGNoQ2hhaW4ob3B0aW9ucy5jaGFpbklkKTtcbiAgICB9XG4gICAgdGhpcy5zZXR1cExpc3RlbmVycygpO1xuICAgIHJldHVybiB0aGlzLmdldEFkZHJlc3MoKTtcbiAgfVxuICBhc3luYyBkaXNjb25uZWN0KCkge1xuICAgIGNvbnN0IHBhcGVyID0gYXdhaXQgdGhpcy5wYXBlcjtcbiAgICBhd2FpdCBwYXBlcj8uYXV0aC5sb2dvdXQoKTtcbiAgICBfY2xhc3NQcml2YXRlRmllbGRTZXQodGhpcywgX3NpZ25lciwgdW5kZWZpbmVkKTtcbiAgICB0aGlzLnVzZXIgPSBudWxsO1xuICB9XG4gIGFzeW5jIGdldEFkZHJlc3MoKSB7XG4gICAgY29uc3Qgc2lnbmVyID0gYXdhaXQgdGhpcy5nZXRTaWduZXIoKTtcbiAgICByZXR1cm4gc2lnbmVyLmdldEFkZHJlc3MoKTtcbiAgfVxuICBhc3luYyBpc0Nvbm5lY3RlZCgpIHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgYWRkciA9IGF3YWl0IHRoaXMuZ2V0QWRkcmVzcygpO1xuICAgICAgcmV0dXJuICEhYWRkcjtcbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICB9XG4gIGFzeW5jIGdldFByb3ZpZGVyKCkge1xuICAgIGNvbnN0IHNpZ25lciA9IGF3YWl0IHRoaXMuZ2V0U2lnbmVyKCk7XG4gICAgaWYgKCFzaWduZXIucHJvdmlkZXIpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIlByb3ZpZGVyIG5vdCBmb3VuZFwiKTtcbiAgICB9XG4gICAgcmV0dXJuIHNpZ25lci5wcm92aWRlcjtcbiAgfVxuICBhc3luYyBnZXRTaWduZXIoKSB7XG4gICAgaWYgKF9jbGFzc1ByaXZhdGVGaWVsZEdldCh0aGlzLCBfc2lnbmVyKSkge1xuICAgICAgcmV0dXJuIF9jbGFzc1ByaXZhdGVGaWVsZEdldCh0aGlzLCBfc2lnbmVyKTtcbiAgICB9XG4gICAgaWYgKCF0aGlzLnVzZXIpIHtcbiAgICAgIGNvbnN0IHBhcGVyU0RLID0gYXdhaXQgdGhpcy5nZXRQYXBlclNESygpO1xuICAgICAgY29uc3QgdXNlciA9IGF3YWl0IHBhcGVyU0RLLmdldFVzZXIoKTtcbiAgICAgIHN3aXRjaCAodXNlci5zdGF0dXMpIHtcbiAgICAgICAgY2FzZSBVc2VyU3RhdHVzLkxPR0dFRF9JTl9XQUxMRVRfSU5JVElBTElaRUQ6XG4gICAgICAgICAge1xuICAgICAgICAgICAgdGhpcy51c2VyID0gdXNlcjtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgY29uc3Qgc2lnbmVyID0gYXdhaXQgdGhpcy51c2VyPy53YWxsZXQuZ2V0RXRoZXJzSnNTaWduZXIoe1xuICAgICAgcnBjRW5kcG9pbnQ6IHRoaXMub3B0aW9ucy5jaGFpbi5ycGNbMF0gfHwgXCJcIiAvLyBUT0RPOiBoYW5kbGUgY2hhaW4ucnBjIGJlaW5nIGVtcHR5IGFycmF5XG4gICAgfSk7XG5cbiAgICBpZiAoIXNpZ25lcikge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiU2lnbmVyIG5vdCBmb3VuZFwiKTtcbiAgICB9XG4gICAgX2NsYXNzUHJpdmF0ZUZpZWxkU2V0KHRoaXMsIF9zaWduZXIsIHNpZ25lcik7XG4gICAgcmV0dXJuIHNpZ25lcjtcbiAgfVxuICBhc3luYyBpc0F1dGhvcml6ZWQoKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG4gIGFzeW5jIHN3aXRjaENoYWluKGNoYWluSWQpIHtcbiAgICBjb25zdCBjaGFpbiA9IHRoaXMub3B0aW9ucy5jaGFpbnMuZmluZChjID0+IGMuY2hhaW5JZCA9PT0gY2hhaW5JZCk7XG4gICAgaWYgKCFjaGFpbikge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiQ2hhaW4gbm90IGNvbmZpZ3VyZWRcIik7XG4gICAgfVxuXG4gICAgLy8gdXBkYXRlIGNoYWluIGluIHdhbGxldFxuICAgIGF3YWl0IHRoaXMudXNlcj8ud2FsbGV0LnNldENoYWluKHtcbiAgICAgIGNoYWluOiBcIkV0aGVyZXVtXCJcbiAgICB9KTsgLy8ganVzdCBwYXNzIEV0aGVyZXVtIG5vIG1hdHRlciB3aGF0IGNoYWluIHdlIGFyZSBnb2luZyB0byBjb25uZWN0XG5cbiAgICAvLyB1cGRhdGUgc2lnbmVyXG4gICAgX2NsYXNzUHJpdmF0ZUZpZWxkU2V0KHRoaXMsIF9zaWduZXIsIGF3YWl0IHRoaXMudXNlcj8ud2FsbGV0LmdldEV0aGVyc0pzU2lnbmVyKHtcbiAgICAgIHJwY0VuZHBvaW50OiBjaGFpbi5ycGNbMF0gfHwgXCJcIiAvLyBUT0RPOiBoYW5kbGUgY2hhaW4ucnBjIGJlaW5nIGVtcHR5IGFycmF5XG4gICAgfSkpO1xuXG4gICAgdGhpcy5lbWl0KFwiY2hhbmdlXCIsIHtcbiAgICAgIGNoYWluOiB7XG4gICAgICAgIGlkOiBjaGFpbklkLFxuICAgICAgICB1bnN1cHBvcnRlZDogZmFsc2VcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuXG4gIC8vIHByaXZhdGUgZ2V0VXNlcigpIHtcbiAgLy8gICBpZiAoIXRoaXMudXNlcikge1xuICAvLyAgICAgdGhyb3cgbmV3IEVycm9yKFwiVXNlciBub3QgZm91bmRcIik7XG4gIC8vICAgfVxuICAvLyAgIHJldHVybiB0aGlzLnVzZXI7XG4gIC8vIH1cblxuICBhc3luYyBzZXR1cExpc3RlbmVycygpIHtcbiAgICBjb25zdCBwcm92aWRlciA9IGF3YWl0IHRoaXMuZ2V0UHJvdmlkZXIoKTtcbiAgICBpZiAocHJvdmlkZXIub24pIHtcbiAgICAgIHByb3ZpZGVyLm9uKFwiYWNjb3VudHNDaGFuZ2VkXCIsIHRoaXMub25BY2NvdW50c0NoYW5nZWQpO1xuICAgICAgcHJvdmlkZXIub24oXCJjaGFpbkNoYW5nZWRcIiwgdGhpcy5vbkNoYWluQ2hhbmdlZCk7XG4gICAgICBwcm92aWRlci5vbihcImRpc2Nvbm5lY3RcIiwgdGhpcy5vbkRpc2Nvbm5lY3QpO1xuICAgIH1cbiAgfVxuICB1cGRhdGVDaGFpbnMoY2hhaW5zKSB7XG4gICAgdGhpcy5vcHRpb25zLmNoYWlucyA9IGNoYWlucztcbiAgfVxuICBhc3luYyBnZXRFbWFpbCgpIHtcbiAgICBhd2FpdCB0aGlzLmdldFByb3ZpZGVyKCk7XG4gICAgaWYgKCF0aGlzLnVzZXIpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIk5vIHVzZXIgZm91bmQsIFBhcGVyIFdhbGxldCBpcyBub3QgY29ubmVjdGVkXCIpO1xuICAgIH1cbiAgICByZXR1cm4gdGhpcy51c2VyLmF1dGhEZXRhaWxzLmVtYWlsO1xuICB9XG59XG5cbmV4cG9ydCB7IFBhcGVyV2FsbGV0Q29ubmVjdG9yIH07XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(app-pages-browser)/./node_modules/@thirdweb-dev/wallets/evm/connectors/paper/dist/thirdweb-dev-wallets-evm-connectors-paper.browser.esm.js\n"));

/***/ }),

/***/ "(app-pages-browser)/./node_modules/@paperxyz/embedded-wallet-service-sdk/dist/index.mjs":
/*!***************************************************************************!*\
  !*** ./node_modules/@paperxyz/embedded-wallet-service-sdk/dist/index.mjs ***!
  \***************************************************************************/
/***/ (function(__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   AUTH_TOKEN_LOCAL_STORAGE_NAME: function() { return /* binding */ I; },\n/* harmony export */   AuthProvider: function() { return /* binding */ Y; },\n/* harmony export */   DEVICE_SHARE_LOCAL_STORAGE_NAME: function() { return /* binding */ W; },\n/* harmony export */   DEVICE_SHARE_LOCAL_STORAGE_NAME_DEPRECATED: function() { return /* binding */ X; },\n/* harmony export */   PaperEmbeddedWalletSdk: function() { return /* binding */ N; },\n/* harmony export */   RecoveryShareManagement: function() { return /* binding */ R; },\n/* harmony export */   UserStatus: function() { return /* binding */ H; },\n/* harmony export */   UserWalletStatus: function() { return /* binding */ P; },\n/* harmony export */   WALLET_USER_DETAILS_LOCAL_STORAGE_NAME: function() { return /* binding */ J; },\n/* harmony export */   WALLET_USER_ID_LOCAL_STORAGE_NAME: function() { return /* binding */ L; }\n/* harmony export */ });\n/* harmony import */ var _paperxyz_sdk_common_utilities__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @paperxyz/sdk-common-utilities */ \"(app-pages-browser)/./node_modules/@paperxyz/sdk-common-utilities/dist/index.mjs\");\n/* harmony import */ var _ethersproject_providers__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @ethersproject/providers */ \"(app-pages-browser)/./node_modules/@ethersproject/providers/lib.esm/index.js\");\n/* harmony import */ var _ethersproject_abstract_signer__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @ethersproject/abstract-signer */ \"(app-pages-browser)/./node_modules/@ethersproject/abstract-signer/lib.esm/index.js\");\n/* harmony import */ var _ethersproject_properties__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @ethersproject/properties */ \"(app-pages-browser)/./node_modules/@ethersproject/properties/lib.esm/index.js\");\nvar z=Object.defineProperty,q=Object.defineProperties;var Z=Object.getOwnPropertyDescriptors;var x=Object.getOwnPropertySymbols;var $=Object.prototype.hasOwnProperty,B=Object.prototype.propertyIsEnumerable;var k=(s,e,t)=>e in s?z(s,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[e]=t,u=(s,e)=>{for(var t in e||(e={}))$.call(e,t)&&k(s,t,e[t]);if(x)for(var t of x(e))B.call(e,t)&&k(s,t,e[t]);return s},y=(s,e)=>q(s,Z(e));var i=(s,e,t)=>new Promise((r,n)=>{var o=l=>{try{d(t.next(l))}catch(p){n(p)}},a=l=>{try{d(t.throw(l))}catch(p){n(p)}},d=l=>l.done?r(l.value):Promise.resolve(l.value).then(o,a);d((t=t.apply(s,e)).next())});var E=\"/sdk/2022-08-12/embedded-wallet\",de=`${E}/auth/headless-google-login-managed`,J=s=>`paperEwsWalletUserDetails-${s}`,L=s=>`paperEwsWalletUserId-${s}`,K=\"walletToken\",I=s=>`${K}-${s}`,Q=\"a\",W=(s,e)=>`${Q}-${s}-${e}`,X=s=>`${Q}-${s}`;var R=(t=>(t.USER_MANAGED=\"USER_MANAGED\",t.AWS_MANAGED=\"AWS_MANAGED\",t))(R||{}),Y=(a=>(a.PAPER_EMAIL_OTP=\"PaperEmailOTP\",a.GOOGLE=\"Google\",a.TWITTER=\"Twitter\",a.COGNITO=\"Cognito\",a.AUTH0=\"Auth0\",a.CUSTOM_JWT=\"CustomJWT\",a))(Y||{});var H=(t=>(t.LOGGED_OUT=\"Logged Out\",t.LOGGED_IN_WALLET_INITIALIZED=\"Logged In, Wallet Initialized\",t))(H||{}),P=(n=>(n.LOGGED_OUT=\"Logged Out\",n.LOGGED_IN_WALLET_UNINITIALIZED=\"Logged In, Wallet Uninitialized\",n.LOGGED_IN_NEW_DEVICE=\"Logged In, New Device\",n.LOGGED_IN_WALLET_INITIALIZED=\"Logged In, Wallet Initialized\",n))(P||{});var F=new Map,h=class{constructor({clientId:e}){this.isSupported=typeof window!=\"undefined\"&&!!window.localStorage,this.clientId=e}getItem(e){return i(this,null,function*(){var t;return this.isSupported?window.localStorage.getItem(e):(t=F.get(e))!=null?t:null})}setItem(e,t){return i(this,null,function*(){if(this.isSupported)return window.localStorage.setItem(e,t);F.set(e,t)})}removeItem(e){return i(this,null,function*(){let t=yield this.getItem(e);return this.isSupported&&t?(window.localStorage.removeItem(e),!0):!1})}saveAuthCookie(e){return i(this,null,function*(){yield this.setItem(I(this.clientId),e)})}getAuthCookie(){return i(this,null,function*(){return this.getItem(I(this.clientId))})}removeAuthCookie(){return i(this,null,function*(){return this.removeItem(I(this.clientId))})}saveDeviceShare(e,t){return i(this,null,function*(){yield this.saveWalletUserId(t),yield this.setItem(W(this.clientId,t),e)})}getDeviceShare(){return i(this,null,function*(){let e=yield this.getWalletUserId();return e?this.getItem(W(this.clientId,e)):null})}removeDeviceShare(){return i(this,null,function*(){let e=yield this.getWalletUserId();return e?this.removeItem(W(this.clientId,e)):!1})}getWalletUserId(){return i(this,null,function*(){return this.getItem(L(this.clientId))})}saveWalletUserId(e){return i(this,null,function*(){yield this.setItem(L(this.clientId),e)})}removeWalletUserId(){return i(this,null,function*(){return this.removeItem(L(this.clientId))})}};function v(s){return new Promise(e=>{setTimeout(e,s*1e3)})}var ee={height:\"100%\",width:\"100%\",border:\"none\",backgroundColor:\"transparent\",colorScheme:\"light\",position:\"fixed\",top:\"0px\",right:\"0px\",zIndex:\"2147483646\",display:\"none\"},G=new Map,f=class{constructor({link:e,iframeId:t,container:r=document.body,iframeStyles:n,onIframeInitialize:o}){this.POLLING_INTERVAL_SECONDS=1.4;this.POST_LOAD_BUFFER_SECONDS=1;let a=document.getElementById(t),d=new URL(e),l=\"1.2.4\";if(!l)throw new Error(\"Missing SDK_VERSION env var\");if(d.searchParams.set(\"sdkVersion\",l),!a||a.src!=d.href){if(!a){a=document.createElement(\"iframe\");let p=u(u({},ee),n);Object.assign(a.style,p),a.setAttribute(\"id\",t),a.setAttribute(\"fetchpriority\",\"high\"),r.appendChild(a)}a.src=d.href,a.setAttribute(\"data-version\",l),a.onload=this.onIframeLoadHandler(a,this.POST_LOAD_BUFFER_SECONDS,o)}this.iframe=a}onIframeLoadedInitVariables(){return i(this,null,function*(){return{}})}onIframeLoadHandler(e,t,r){return()=>i(this,null,function*(){yield new Promise((o,a)=>i(this,null,function*(){var p;let d=new MessageChannel;d.port1.onmessage=m=>{let{data:c}=m;return d.port1.close(),c.success?(G.set(e.src,!0),r&&r(),o(!0)):a(new Error(c.error))},yield v(t);let l=\"initIframe\";(p=e==null?void 0:e.contentWindow)==null||p.postMessage({eventType:l,data:yield this.onIframeLoadedInitVariables()},`${(0,_paperxyz_sdk_common_utilities__WEBPACK_IMPORTED_MODULE_0__.getPaperOriginUrl)()}${E}`,[d.port2])}))})}call(o){return i(this,arguments,function*({procedureName:e,params:t,showIframe:r=!1,injectRecoveryCode:n={isInjectRecoveryCode:!1}}){for(;!G.get(this.iframe.src);)yield v(this.POLLING_INTERVAL_SECONDS);return r&&(this.iframe.style.display=\"block\",yield v(.005)),new Promise((d,l)=>{var m;if(n.isInjectRecoveryCode){let c=g=>i(this,null,function*(){var U,b;if(g.origin!==(0,_paperxyz_sdk_common_utilities__WEBPACK_IMPORTED_MODULE_0__.getPaperOriginUrl)()||g.data.type!==\"paper_getRecoveryCode\"||typeof g.data.userWalletId!=\"string\")return;let V=yield(U=n.getRecoveryCode)==null?void 0:U.call(n,g.data.userWalletId);(b=this.iframe.contentWindow)==null||b.postMessage({type:\"paper_getRecoveryCode_response\",recoveryCode:V},(0,_paperxyz_sdk_common_utilities__WEBPACK_IMPORTED_MODULE_0__.getPaperOriginUrl)()),window.removeEventListener(\"message\",c)});window.addEventListener(\"message\",c)}let p=new MessageChannel;p.port1.onmessage=c=>i(this,null,function*(){let{data:g}=c;p.port1.close(),r&&(yield v(.1),this.iframe.style.display=\"none\"),g.success?d(g.data):l(new Error(g.error))}),(m=this.iframe.contentWindow)==null||m.postMessage({eventType:e,data:t},`${(0,_paperxyz_sdk_common_utilities__WEBPACK_IMPORTED_MODULE_0__.getPaperOriginUrl)()}${E}`,[p.port2])})})}destroy(){G.delete(this.iframe.src)}};var _=class extends f{constructor({clientId:t,customizationOptions:r}){super({iframeId:ie,link:re({clientId:t,path:E,queryParams:r}).href,container:document.body});this.clientId=t}onIframeLoadedInitVariables(){return i(this,null,function*(){let t=new h({clientId:this.clientId});return{authCookie:yield t.getAuthCookie(),deviceShareStored:yield t.getDeviceShare(),walletUserId:yield t.getWalletUserId(),clientId:this.clientId}})}};function re({clientId:s,path:e,queryParams:t}){var n;let r=new URL(e,(0,_paperxyz_sdk_common_utilities__WEBPACK_IMPORTED_MODULE_0__.getPaperOriginUrl)());if(t)for(let o of Object.keys(t))r.searchParams.set(o,((n=t[o])==null?void 0:n.toString())||\"\");return r.searchParams.set(\"clientId\",s),r}var ie=\"paper-embedded-wallet-iframe\";var A=class{constructor({querier:e,preLogin:t,postLogin:r,clientId:n}){this.LoginQuerier=e,this.preLogin=t,this.postLogin=r,this.clientId=n}sendPaperEmailLoginOtp(r){return i(this,arguments,function*({email:e,recoveryShareManagement:t}){yield this.preLogin();let{isNewUser:n,isNewDevice:o,recoveryShareManagement:a}=yield this.LoginQuerier.call({procedureName:\"sendPaperEmailLoginOtp\",params:{email:e,recoveryShareManagement:t}});return{isNewUser:n,isNewDevice:o,recoveryShareManagement:a}})}};var C=class extends A{constructor(){super(...arguments);this.closeWindow=({isWindowOpenedByFn:t,win:r,closeOpenedWindow:n})=>{t?r==null||r.close():r&&n?n(r):r&&r.close()}}loginWithPaperModal(){return i(this,null,function*(){yield this.preLogin();let t=yield this.LoginQuerier.call({procedureName:\"loginWithPaperModal\",params:{recoveryShareManagement:\"AWS_MANAGED\"},showIframe:!0,injectRecoveryCode:{isInjectRecoveryCode:!0}});return this.postLogin(t)})}getGoogleLoginUrl(){return i(this,null,function*(){return yield this.LoginQuerier.call({procedureName:\"getHeadlessGoogleLoginLink\",params:void 0})})}loginWithGoogle(t){return i(this,null,function*(){yield this.preLogin();let r=t==null?void 0:t.openedWindow,n=!1;if(r||(r=window.open(\"\",\"Login\",\"width=350, height=500\"),n=!0),!r)throw new Error(\"Something went wrong opening pop-up\");yield this.preLogin();let{loginLink:o}=yield this.getGoogleLoginUrl();r.location.href=o;let a=yield new Promise((d,l)=>{let p=window.setInterval(()=>i(this,null,function*(){r&&r.closed&&(clearInterval(p),window.removeEventListener(\"message\",m),l(new Error(\"User closed login window\")))}),1e3),m=c=>i(this,null,function*(){if(c.origin===(0,_paperxyz_sdk_common_utilities__WEBPACK_IMPORTED_MODULE_0__.getPaperOriginUrl)()){if(typeof c.data!=\"object\"){l(new Error(\"Invalid event data\"));return}switch(c.data.eventType){case\"userLoginSuccess\":{window.removeEventListener(\"message\",m),clearInterval(p),this.closeWindow({isWindowOpenedByFn:n,win:r,closeOpenedWindow:t==null?void 0:t.closeOpenedWindow}),c.data.authResult&&d(c.data.authResult);break}case\"userLoginFailed\":{window.removeEventListener(\"message\",m),clearInterval(p),this.closeWindow({isWindowOpenedByFn:n,win:r,closeOpenedWindow:t==null?void 0:t.closeOpenedWindow}),l(new Error(c.data.error));break}case\"injectDeveloperClientId\":{r==null||r.postMessage({eventType:\"injectDeveloperClientIdResult\",developerClientId:this.clientId},(0,_paperxyz_sdk_common_utilities__WEBPACK_IMPORTED_MODULE_0__.getPaperOriginUrl)());break}}}});window.addEventListener(\"message\",m)});return this.postLogin({storedToken:y(u({},a.storedToken),{shouldStoreCookieString:!0}),walletDetails:y(u({},a.walletDetails),{isIframeStorageEnabled:!1})})})}loginWithPaperEmailOtp(r){return i(this,arguments,function*({email:t}){yield this.preLogin();let n=yield this.LoginQuerier.call({procedureName:\"loginWithPaperModal\",params:{email:t,recoveryShareManagement:\"AWS_MANAGED\"},showIframe:!0,injectRecoveryCode:{isInjectRecoveryCode:!0}});return this.postLogin(n)})}verifyPaperEmailLoginOtp(n){return i(this,arguments,function*({email:t,otp:r}){let o=yield this.LoginQuerier.call({procedureName:\"verifyPaperEmailLoginOtp\",params:{email:t,otp:r,recoveryShareManagement:\"AWS_MANAGED\"},injectRecoveryCode:{isInjectRecoveryCode:!0}});return this.postLogin(o)})}};var D=class extends A{loginWithPaperModal(e){return i(this,null,function*(){yield this.preLogin();let t=yield this.LoginQuerier.call({procedureName:\"loginWithPaperModal\",params:void 0,showIframe:!0,injectRecoveryCode:{isInjectRecoveryCode:!0,getRecoveryCode:e==null?void 0:e.getRecoveryCode}});return this.postLogin(t)})}loginWithGoogle(e){return i(this,null,function*(){throw new Error(\"loginWithGoogle is not yet supported in the RecoveryShareManagement.USER_MANAGED flow. Please use RecoveryShareManagement.AWS_MANAGED instead.\")})}loginWithPaperEmailOtp(r){return i(this,arguments,function*({email:e,recoveryCode:t}){yield this.preLogin();let n=yield this.LoginQuerier.call({procedureName:\"loginWithPaperModal\",params:{email:e,recoveryCode:t},showIframe:!0,injectRecoveryCode:{isInjectRecoveryCode:!0}});return this.postLogin(n)})}verifyPaperEmailLoginOtp(n){return i(this,arguments,function*({email:e,otp:t,recoveryCode:r}){let o=yield this.LoginQuerier.call({procedureName:\"verifyPaperEmailLoginOtp\",params:{email:e,otp:t,recoveryCode:r},injectRecoveryCode:{isInjectRecoveryCode:!0}});return this.postLogin(o)})}};var M=class{constructor({clientId:e,advancedOptions:t,querier:r,onAuthSuccess:n}){var o;this.clientId=e,this.advancedOptions={recoveryShareManagement:(o=t==null?void 0:t.recoveryShareManagement)!=null?o:\"AWS_MANAGED\"},this.AuthQuerier=r,this.localStorage=new h({clientId:e}),this.onAuthSuccess=n,this.userManagedLogin=new D({postLogin:a=>i(this,null,function*(){return this.postLogin(a)}),preLogin:()=>i(this,null,function*(){yield this.preLogin()}),querier:r,clientId:e}),this.awsManagedLogin=new C({postLogin:a=>i(this,null,function*(){return this.postLogin(a)}),preLogin:()=>i(this,null,function*(){yield this.preLogin()}),querier:r,clientId:e})}preLogin(){return i(this,null,function*(){yield this.logout()})}postLogin(r){return i(this,arguments,function*({storedToken:e,walletDetails:t}){return e.shouldStoreCookieString&&(yield this.localStorage.saveAuthCookie(e.cookieString)),yield this.onAuthSuccess({storedToken:e,walletDetails:t})})}loginWithJwtAuth(n){return i(this,arguments,function*({token:e,authProvider:t,recoveryCode:r}){yield this.preLogin();let o=yield this.AuthQuerier.call({procedureName:\"loginWithJwtAuthCallback\",params:{token:e,authProvider:t,recoveryCode:r}});return this.postLogin(o)})}loginWithPaperModal(e){return i(this,null,function*(){return yield this.preLogin(),this.advancedOptions.recoveryShareManagement===\"AWS_MANAGED\"?this.awsManagedLogin.loginWithPaperModal():this.userManagedLogin.loginWithPaperModal(e)})}loginWithPaperEmailOtp(e){return i(this,null,function*(){return this.advancedOptions.recoveryShareManagement===\"AWS_MANAGED\"?this.awsManagedLogin.loginWithPaperEmailOtp({email:e.email}):this.userManagedLogin.loginWithPaperEmailOtp(e)})}loginWithGoogle(e){return i(this,null,function*(){return this.advancedOptions.recoveryShareManagement===\"AWS_MANAGED\"?this.awsManagedLogin.loginWithGoogle(e):this.userManagedLogin.loginWithGoogle()})}sendPaperEmailLoginOtp(t){return i(this,arguments,function*({email:e}){return this.advancedOptions.recoveryShareManagement===\"AWS_MANAGED\"?this.awsManagedLogin.sendPaperEmailLoginOtp({email:e,recoveryShareManagement:\"AWS_MANAGED\"}):this.userManagedLogin.sendPaperEmailLoginOtp({email:e})})}verifyPaperEmailLoginOtp(e){return i(this,null,function*(){return this.advancedOptions.recoveryShareManagement===\"AWS_MANAGED\"?this.awsManagedLogin.verifyPaperEmailLoginOtp(e):this.userManagedLogin.verifyPaperEmailLoginOtp(e)})}logout(){return i(this,null,function*(){let{success:e}=yield this.AuthQuerier.call({procedureName:\"logout\",params:void 0}),t=yield this.localStorage.removeAuthCookie(),r=yield this.localStorage.removeWalletUserId();return{success:e||t||r}})}};var w=class{constructor({chain:e,clientId:t,querier:r}){this.chain=e,this.clientId=t,this.gaslessTransactionQuerier=r}callContract(n){return i(this,arguments,function*({contractAddress:e,methodArgs:t,methodInterface:r}){return yield this.gaslessTransactionQuerier.call({procedureName:\"callContract\",params:{chain:this.chain,contractAddress:e,method:{args:t,stub:r}}})})}};var T=class extends _ethersproject_abstract_signer__WEBPACK_IMPORTED_MODULE_1__.Signer{constructor({provider:t,clientId:r,querier:n}){var o;super();this.DEFAULT_ETHEREUM_CHAIN_ID=5;this.clientId=r,this.querier=n,this.endpoint=(o=t.connection)==null?void 0:o.url,(0,_ethersproject_properties__WEBPACK_IMPORTED_MODULE_2__.defineReadOnly)(this,\"provider\",t)}getAddress(){return i(this,null,function*(){let{address:t}=yield this.querier.call({procedureName:\"getAddress\",params:void 0});return t})}signMessage(t){return i(this,null,function*(){var o,a,d,l;let r=yield(o=this.provider)==null?void 0:o.getNetwork();r&&r._defaultProvider;let{signedMessage:n}=yield this.querier.call({procedureName:\"signMessage\",params:{message:t,chainId:(l=(d=yield(a=this.provider)==null?void 0:a.getNetwork())==null?void 0:d.chainId)!=null?l:this.DEFAULT_ETHEREUM_CHAIN_ID,rpcEndpoint:this.endpoint}});return n})}signTransaction(t){return i(this,null,function*(){var n,o,a;let{signedTransaction:r}=yield this.querier.call({procedureName:\"signTransaction\",params:{transaction:t,chainId:(a=(o=yield(n=this.provider)==null?void 0:n.getNetwork())==null?void 0:o.chainId)!=null?a:this.DEFAULT_ETHEREUM_CHAIN_ID,rpcEndpoint:this.endpoint}});return r})}_signTypedData(t,r,n){return i(this,null,function*(){var a,d,l;let{signedTypedData:o}=yield this.querier.call({procedureName:\"signTypedDataV4\",params:{domain:t,types:r,message:n,chainId:(l=(d=yield(a=this.provider)==null?void 0:a.getNetwork())==null?void 0:d.chainId)!=null?l:this.DEFAULT_ETHEREUM_CHAIN_ID,rpcEndpoint:this.endpoint}});return o})}connect(t){return new T({clientId:this.clientId,provider:t,querier:this.querier})}};var O=class{constructor({clientId:e,chain:t,querier:r}){this.clientId=e,this.chain=t,this.walletManagerQuerier=r,this.gasless=new w({chain:t,clientId:e,querier:r}),this.localStorage=new h({clientId:e})}postWalletSetUp(o){return i(this,arguments,function*({deviceShareStored:e,walletAddress:t,isIframeStorageEnabled:r,walletUserId:n}){return r||(yield this.localStorage.saveDeviceShare(e,n)),{walletAddress:t}})}getUserWalletStatus(){return i(this,null,function*(){let e=yield this.walletManagerQuerier.call({procedureName:\"getUserStatus\",params:void 0});return e.status===\"Logged In, Wallet Initialized\"?{status:\"Logged In, Wallet Initialized\",user:y(u({},e.user),{wallet:this})}:e})}setChain(t){return i(this,arguments,function*({chain:e}){this.chain=e,this.gasless=new w({chain:e,clientId:this.clientId,querier:this.walletManagerQuerier})})}getEthersJsSigner(e){return i(this,null,function*(){var r;return new T({clientId:this.clientId,provider:(0,_ethersproject_providers__WEBPACK_IMPORTED_MODULE_3__.getDefaultProvider)((r=e==null?void 0:e.rpcEndpoint)!=null?r:_paperxyz_sdk_common_utilities__WEBPACK_IMPORTED_MODULE_0__.ChainToPublicRpc[this.chain]),querier:this.walletManagerQuerier})})}};var N=class{constructor({clientId:e,chain:t,styles:r,advancedOptions:n}){this.clientId=e,this.querier=new _({clientId:e,customizationOptions:r}),this.wallet=new O({clientId:e,chain:t,querier:this.querier}),this.auth=new M({clientId:e,advancedOptions:u({recoveryShareManagement:\"USER_MANAGED\"},n!=null?n:{}),querier:this.querier,onAuthSuccess:o=>i(this,null,function*(){return yield this.wallet.postWalletSetUp(y(u({},o.walletDetails),{walletUserId:o.storedToken.authDetails.userWalletId})),yield this.querier.call({procedureName:\"initIframe\",params:{deviceShareStored:o.walletDetails.deviceShareStored,clientId:this.clientId,walletUserId:o.storedToken.authDetails.userWalletId,authCookie:o.storedToken.cookieString}}),{user:{status:\"Logged In, Wallet Initialized\",authDetails:o.storedToken.authDetails,wallet:this.wallet,walletAddress:o.walletDetails.walletAddress}}})})}getUser(){return i(this,null,function*(){let e=yield this.wallet.getUserWalletStatus();switch(e.status){case\"Logged In, New Device\":case\"Logged In, Wallet Uninitialized\":return yield this.auth.logout(),this.getUser();case\"Logged Out\":return{status:\"Logged Out\"};case\"Logged In, Wallet Initialized\":return u({status:\"Logged In, Wallet Initialized\"},e.user)}})}};\n//# sourceMappingURL=index.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL25vZGVfbW9kdWxlcy9AcGFwZXJ4eXovZW1iZWRkZWQtd2FsbGV0LXNlcnZpY2Utc2RrL2Rpc3QvaW5kZXgubWpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUEsc0RBQXNELHVDQUF1QyxtQ0FBbUMsOEVBQThFLDZCQUE2QixrREFBa0QsbUJBQW1CLHFCQUFxQiwyQkFBMkIsZ0RBQWdELFNBQVMsb0JBQW9CLG1DQUFtQyxVQUFVLElBQUksYUFBYSxTQUFTLE1BQU0sT0FBTyxJQUFJLGNBQWMsU0FBUyxNQUFNLDJEQUEyRCwyQkFBMkIsRUFBRSw4Q0FBOEMsRUFBRSx1RUFBdUUsRUFBRSwrQkFBK0IsRUFBRSwwQkFBMEIsRUFBRSxHQUFHLEVBQUUsb0JBQW9CLEVBQUUsR0FBRyxFQUFFLEdBQUcsRUFBRSxVQUFVLEVBQUUsR0FBRyxFQUFFLEVBQUUsOEVBQThFLHVKQUF1SixFQUFFLDZHQUE2Ryw2TkFBNk4sRUFBc0Usc0JBQXNCLGFBQWEsV0FBVyxFQUFFLG1GQUFtRixXQUFXLCtCQUErQixNQUFNLGlGQUFpRixFQUFFLGFBQWEsK0JBQStCLDREQUE0RCxXQUFXLEVBQUUsY0FBYywrQkFBK0IsNEJBQTRCLHFFQUFxRSxFQUFFLGtCQUFrQiwrQkFBK0IsdUNBQXVDLEVBQUUsZ0JBQWdCLCtCQUErQixzQ0FBc0MsRUFBRSxtQkFBbUIsK0JBQStCLHlDQUF5QyxFQUFFLHFCQUFxQiwrQkFBK0Isd0VBQXdFLEVBQUUsaUJBQWlCLCtCQUErQixtQ0FBbUMsK0NBQStDLEVBQUUsb0JBQW9CLCtCQUErQixtQ0FBbUMsZ0RBQWdELEVBQUUsa0JBQWtCLCtCQUErQixzQ0FBc0MsRUFBRSxvQkFBb0IsK0JBQStCLHVDQUF1QyxFQUFFLHFCQUFxQiwrQkFBK0IseUNBQXlDLElBQXVFLGNBQWMsdUJBQXVCLG9CQUFvQixFQUFFLFFBQVEscUtBQXFLLG1CQUFtQixhQUFhLGdGQUFnRixFQUFFLGtDQUFrQyxnQ0FBZ0Msd0RB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LDBEQUEwRCxpQkFBaUIsRUFBRSxzQkFBc0IsK0JBQStCLDRDQUE0Qyw0Q0FBNEMsRUFBRSxtREFBbUQsa0RBQWtELFVBQVUsWUFBWSxFQUFFLEdBQUcsRUFBRSxZQUFZLG1DQUFtQyxRQUFRLEVBQUUsaUNBQWlDLGlFQUFpRSxFQUFFLEVBQUUscUJBQXFCLCtCQUErQixNQUFNLGNBQWMsZ0NBQWdDLDRFQUFFLDBDQUEwQyw0RUFBRSxnREFBZ0QsRUFBRSxJQUFJLFlBQVksYUFBYSw4Q0FBOEMsRUFBRSxvQ0FBb0Msa0NBQWtDLHFCQUFxQix3Q0FBd0MsbUJBQW1CLDhCQUE4Qix1Q0FBdUMsYUFBYSxnRUFBZ0UsK0NBQStDLG1CQUFtQixvREFBb0QsNEJBQTRCLG1DQUFtQyxzS0FBc0ssR0FBRyxNQUFNLDhJQUE4SSxFQUFFLEVBQUUsVUFBVSwrQkFBK0IsOENBQThDLGlCQUFpQixpSEFBaUgsd0JBQXdCLHFCQUFxQiw4Q0FBOEMsdUNBQXVDLFVBQVUsSUFBd1U7QUFDeDlpQiIsInNvdXJjZXMiOlsid2VicGFjazovL19OX0UvLi9ub2RlX21vZHVsZXMvQHBhcGVyeHl6L2VtYmVkZGVkLXdhbGxldC1zZXJ2aWNlLXNkay9kaXN0L2luZGV4Lm1qcz8zN2E5Il0sInNvdXJjZXNDb250ZW50IjpbInZhciB6PU9iamVjdC5kZWZpbmVQcm9wZXJ0eSxxPU9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzO3ZhciBaPU9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzO3ZhciB4PU9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHM7dmFyICQ9T2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eSxCPU9iamVjdC5wcm90b3R5cGUucHJvcGVydHlJc0VudW1lcmFibGU7dmFyIGs9KHMsZSx0KT0+ZSBpbiBzP3oocyxlLHtlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMCx3cml0YWJsZTohMCx2YWx1ZTp0fSk6c1tlXT10LHU9KHMsZSk9Pntmb3IodmFyIHQgaW4gZXx8KGU9e30pKSQuY2FsbChlLHQpJiZrKHMsdCxlW3RdKTtpZih4KWZvcih2YXIgdCBvZiB4KGUpKUIuY2FsbChlLHQpJiZrKHMsdCxlW3RdKTtyZXR1cm4gc30seT0ocyxlKT0+cShzLFooZSkpO3ZhciBpPShzLGUsdCk9Pm5ldyBQcm9taXNlKChyLG4pPT57dmFyIG89bD0+e3RyeXtkKHQubmV4dChsKSl9Y2F0Y2gocCl7bihwKX19LGE9bD0+e3RyeXtkKHQudGhyb3cobCkpfWNhdGNoKHApe24ocCl9fSxkPWw9PmwuZG9uZT9yKGwudmFsdWUpOlByb21pc2UucmVzb2x2ZShsLnZhbHVlKS50aGVuKG8sYSk7ZCgodD10LmFwcGx5KHMsZSkpLm5leHQoKSl9KTt2YXIgRT1cIi9zZGsvMjAyMi0wOC0xMi9lbWJlZGRlZC13YWxsZXRcIixkZT1gJHtFfS9hdXRoL2hlYWRsZXNzLWdvb2dsZS1sb2dpbi1tYW5hZ2VkYCxKPXM9PmBwYXBlckV3c1dhbGxldFVzZXJEZXRhaWxzLSR7c31gLEw9cz0+YHBhcGVyRXdzV2FsbGV0VXNlcklkLSR7c31gLEs9XCJ3YWxsZXRUb2tlblwiLEk9cz0+YCR7S30tJHtzfWAsUT1cImFcIixXPShzLGUpPT5gJHtRfS0ke3N9LSR7ZX1gLFg9cz0+YCR7UX0tJHtzfWA7dmFyIFI9KHQ9Pih0LlVTRVJfTUFOQUdFRD1cIlVTRVJfTUFOQUdFRFwiLHQuQVdTX01BTkFHRUQ9XCJBV1NfTUFOQUdFRFwiLHQpKShSfHx7fSksWT0oYT0+KGEuUEFQRVJfRU1BSUxfT1RQPVwiUGFwZXJFbWFpbE9UUFwiLGEuR09PR0xFPVwiR29vZ2xlXCIsYS5UV0lUVEVSPVwiVHdpdHRlclwiLGEuQ09HTklUTz1cIkNvZ25pdG9cIixhLkFVVEgwPVwiQXV0aDBcIixhLkNVU1RPTV9KV1Q9XCJDdXN0b21KV1RcIixhKSkoWXx8e30pO3ZhciBIPSh0PT4odC5MT0dHRURfT1VUPVwiTG9nZ2VkIE91dFwiLHQuTE9HR0VEX0lOX1dBTExFVF9JTklUSUFMSVpFRD1cIkxvZ2dlZCBJbiwgV2FsbGV0IEluaXRpYWxpemVkXCIsdCkpKEh8fHt9KSxQPShuPT4obi5MT0dHRURfT1VUPVwiTG9nZ2VkIE91dFwiLG4uTE9HR0VEX0lOX1dBTExFVF9VTklOSVRJQUxJWkVEPVwiTG9nZ2VkIEluLCBXYWxsZXQgVW5pbml0aWFsaXplZFwiLG4uTE9HR0VEX0lOX05FV19ERVZJQ0U9XCJMb2dnZWQgSW4sIE5ldyBEZXZpY2VcIixuLkxPR0dFRF9JTl9XQUxMRVRfSU5JVElBTElaRUQ9XCJMb2dnZWQgSW4sIFdhbGxldCBJbml0aWFsaXplZFwiLG4pKShQfHx7fSk7aW1wb3J0e2dldFBhcGVyT3JpZ2luVXJsIGFzIHRlfWZyb21cIkBwYXBlcnh5ei9zZGstY29tbW9uLXV0aWxpdGllc1wiO3ZhciBGPW5ldyBNYXAsaD1jbGFzc3tjb25zdHJ1Y3Rvcih7Y2xpZW50SWQ6ZX0pe3RoaXMuaXNTdXBwb3J0ZWQ9dHlwZW9mIHdpbmRvdyE9XCJ1bmRlZmluZWRcIiYmISF3aW5kb3cubG9jYWxTdG9yYWdlLHRoaXMuY2xpZW50SWQ9ZX1nZXRJdGVtKGUpe3JldHVybiBpKHRoaXMsbnVsbCxmdW5jdGlvbiooKXt2YXIgdDtyZXR1cm4gdGhpcy5pc1N1cHBvcnRlZD93aW5kb3cubG9jYWxTdG9yYWdlLmdldEl0ZW0oZSk6KHQ9Ri5nZXQoZSkpIT1udWxsP3Q6bnVsbH0pfXNldEl0ZW0oZSx0KXtyZXR1cm4gaSh0aGlzLG51bGwsZnVuY3Rpb24qKCl7aWYodGhpcy5pc1N1cHBvcnRlZClyZXR1cm4gd2luZG93LmxvY2FsU3RvcmFnZS5zZXRJdGVtKGUsdCk7Ri5zZXQoZSx0KX0pfXJlbW92ZUl0ZW0oZSl7cmV0dXJuIGkodGhpcyxudWxsLGZ1bmN0aW9uKigpe2xldCB0PXlpZWxkIHRoaXMuZ2V0SXRlbShlKTtyZXR1cm4gdGhpcy5pc1N1cHBvcnRlZCYmdD8od2luZG93LmxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKGUpLCEwKTohMX0pfXNhdmVBdXRoQ29va2llKGUpe3JldHVybiBpKHRoaXMsbnVsbCxmdW5jdGlvbiooKXt5aWVsZCB0aGlzLnNldEl0ZW0oSSh0aGlzLmNsaWVudElkKSxlKX0pfWdldEF1dGhDb29raWUoKXtyZXR1cm4gaSh0aGlzLG51bGwsZnVuY3Rpb24qKCl7cmV0dXJuIHRoaXMuZ2V0SXRlbShJKHRoaXMuY2xpZW50SWQpKX0pfXJlbW92ZUF1dGhDb29raWUoKXtyZXR1cm4gaSh0aGlzLG51bGwsZnVuY3Rpb24qKCl7cmV0dXJuIHRoaXMucmVtb3ZlSXRlbShJKHRoaXMuY2xpZW50SWQpKX0pfXNhdmVEZXZpY2VTaGFyZShlLHQpe3JldHVybiBpKHRoaXMsbnVsbCxmdW5jdGlvbiooKXt5aWVsZCB0aGlzLnNhdmVXYWxsZXRVc2VySWQodCkseWllbGQgdGhpcy5zZXRJdGVtKFcodGhpcy5jbGllbnRJZCx0KSxlKX0pfWdldERldmljZVNoYXJlKCl7cmV0dXJuIGkodGhpcyxudWxsLGZ1bmN0aW9uKigpe2xldCBlPXlpZWxkIHRoaXMuZ2V0V2FsbGV0VXNlcklkKCk7cmV0dXJuIGU/dGhpcy5nZXRJdGVtKFcodGhpcy5jbGllbnRJZCxlKSk6bnVsbH0pfXJlbW92ZURldmljZVNoYXJlKCl7cmV0dXJuIGkodGhpcyxudWxsLGZ1bmN0aW9uKigpe2xldCBlPXlpZWxkIHRoaXMuZ2V0V2FsbGV0VXNlcklkKCk7cmV0dXJuIGU/dGhpcy5yZW1vdmVJdGVtKFcodGhpcy5jbGllbnRJZCxlKSk6ITF9KX1nZXRXYWxsZXRVc2VySWQoKXtyZXR1cm4gaSh0aGlzLG51bGwsZnVuY3Rpb24qKCl7cmV0dXJuIHRoaXMuZ2V0SXRlbShMKHRoaXMuY2xpZW50SWQpKX0pfXNhdmVXYWxsZXRVc2VySWQoZSl7cmV0dXJuIGkodGhpcyxudWxsLGZ1bmN0aW9uKigpe3lpZWxkIHRoaXMuc2V0SXRlbShMKHRoaXMuY2xpZW50SWQpLGUpfSl9cmVtb3ZlV2FsbGV0VXNlcklkKCl7cmV0dXJuIGkodGhpcyxudWxsLGZ1bmN0aW9uKigpe3JldHVybiB0aGlzLnJlbW92ZUl0ZW0oTCh0aGlzLmNsaWVudElkKSl9KX19O2ltcG9ydHtnZXRQYXBlck9yaWdpblVybCBhcyBTfWZyb21cIkBwYXBlcnh5ei9zZGstY29tbW9uLXV0aWxpdGllc1wiO2Z1bmN0aW9uIHYocyl7cmV0dXJuIG5ldyBQcm9taXNlKGU9PntzZXRUaW1lb3V0KGUscyoxZTMpfSl9dmFyIGVlPXtoZWlnaHQ6XCIxMDAlXCIsd2lkdGg6XCIxMDAlXCIsYm9yZGVyOlwibm9uZVwiLGJhY2tncm91bmRDb2xvcjpcInRyYW5zcGFyZW50XCIsY29sb3JTY2hlbWU6XCJsaWdodFwiLHBvc2l0aW9uOlwiZml4ZWRcIix0b3A6XCIwcHhcIixyaWdodDpcIjBweFwiLHpJbmRleDpcIjIxNDc0ODM2NDZcIixkaXNwbGF5Olwibm9uZVwifSxHPW5ldyBNYXAsZj1jbGFzc3tjb25zdHJ1Y3Rvcih7bGluazplLGlmcmFtZUlkOnQsY29udGFpbmVyOnI9ZG9jdW1lbnQuYm9keSxpZnJhbWVTdHlsZXM6bixvbklmcmFtZUluaXRpYWxpemU6b30pe3RoaXMuUE9MTElOR19JTlRFUlZBTF9TRUNPTkRTPTEuNDt0aGlzLlBPU1RfTE9BRF9CVUZGRVJfU0VDT05EUz0xO2xldCBhPWRvY3VtZW50LmdldEVsZW1lbnRCeUlkKHQpLGQ9bmV3IFVSTChlKSxsPVwiMS4yLjRcIjtpZighbCl0aHJvdyBuZXcgRXJyb3IoXCJNaXNzaW5nIFNES19WRVJTSU9OIGVudiB2YXJcIik7aWYoZC5zZWFyY2hQYXJhbXMuc2V0KFwic2RrVmVyc2lvblwiLGwpLCFhfHxhLnNyYyE9ZC5ocmVmKXtpZighYSl7YT1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiaWZyYW1lXCIpO2xldCBwPXUodSh7fSxlZSksbik7T2JqZWN0LmFzc2lnbihhLnN0eWxlLHApLGEuc2V0QXR0cmlidXRlKFwiaWRcIix0KSxhLnNldEF0dHJpYnV0ZShcImZldGNocHJpb3JpdHlcIixcImhpZ2hcIiksci5hcHBlbmRDaGlsZChhKX1hLnNyYz1kLmhyZWYsYS5zZXRBdHRyaWJ1dGUoXCJkYXRhLXZlcnNpb25cIixsKSxhLm9ubG9hZD10aGlzLm9uSWZyYW1lTG9hZEhhbmRsZXIoYSx0aGlzLlBPU1RfTE9BRF9CVUZGRVJfU0VDT05EUyxvKX10aGlzLmlmcmFtZT1hfW9uSWZyYW1lTG9hZGVkSW5pdFZhcmlhYmxlcygpe3JldHVybiBpKHRoaXMsbnVsbCxmdW5jdGlvbiooKXtyZXR1cm57fX0pfW9uSWZyYW1lTG9hZEhhbmRsZXIoZSx0LHIpe3JldHVybigpPT5pKHRoaXMsbnVsbCxmdW5jdGlvbiooKXt5aWVsZCBuZXcgUHJvbWlzZSgobyxhKT0+aSh0aGlzLG51bGwsZnVuY3Rpb24qKCl7dmFyIHA7bGV0IGQ9bmV3IE1lc3NhZ2VDaGFubmVsO2QucG9ydDEub25tZXNzYWdlPW09PntsZXR7ZGF0YTpjfT1tO3JldHVybiBkLnBvcnQxLmNsb3NlKCksYy5zdWNjZXNzPyhHLnNldChlLnNyYywhMCksciYmcigpLG8oITApKTphKG5ldyBFcnJvcihjLmVycm9yKSl9LHlpZWxkIHYodCk7bGV0IGw9XCJpbml0SWZyYW1lXCI7KHA9ZT09bnVsbD92b2lkIDA6ZS5jb250ZW50V2luZG93KT09bnVsbHx8cC5wb3N0TWVzc2FnZSh7ZXZlbnRUeXBlOmwsZGF0YTp5aWVsZCB0aGlzLm9uSWZyYW1lTG9hZGVkSW5pdFZhcmlhYmxlcygpfSxgJHtTKCl9JHtFfWAsW2QucG9ydDJdKX0pKX0pfWNhbGwobyl7cmV0dXJuIGkodGhpcyxhcmd1bWVudHMsZnVuY3Rpb24qKHtwcm9jZWR1cmVOYW1lOmUscGFyYW1zOnQsc2hvd0lmcmFtZTpyPSExLGluamVjdFJlY292ZXJ5Q29kZTpuPXtpc0luamVjdFJlY292ZXJ5Q29kZTohMX19KXtmb3IoOyFHLmdldCh0aGlzLmlmcmFtZS5zcmMpOyl5aWVsZCB2KHRoaXMuUE9MTElOR19JTlRFUlZBTF9TRUNPTkRTKTtyZXR1cm4gciYmKHRoaXMuaWZyYW1lLnN0eWxlLmRpc3BsYXk9XCJibG9ja1wiLHlpZWxkIHYoLjAwNSkpLG5ldyBQcm9taXNlKChkLGwpPT57dmFyIG07aWYobi5pc0luamVjdFJlY292ZXJ5Q29kZSl7bGV0IGM9Zz0+aSh0aGlzLG51bGwsZnVuY3Rpb24qKCl7dmFyIFUsYjtpZihnLm9yaWdpbiE9PVMoKXx8Zy5kYXRhLnR5cGUhPT1cInBhcGVyX2dldFJlY292ZXJ5Q29kZVwifHx0eXBlb2YgZy5kYXRhLnVzZXJXYWxsZXRJZCE9XCJzdHJpbmdcIilyZXR1cm47bGV0IFY9eWllbGQoVT1uLmdldFJlY292ZXJ5Q29kZSk9PW51bGw/dm9pZCAwOlUuY2FsbChuLGcuZGF0YS51c2VyV2FsbGV0SWQpOyhiPXRoaXMuaWZyYW1lLmNvbnRlbnRXaW5kb3cpPT1udWxsfHxiLnBvc3RNZXNzYWdlKHt0eXBlOlwicGFwZXJfZ2V0UmVjb3ZlcnlDb2RlX3Jlc3BvbnNlXCIscmVjb3ZlcnlDb2RlOlZ9LFMoKSksd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJtZXNzYWdlXCIsYyl9KTt3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcIm1lc3NhZ2VcIixjKX1sZXQgcD1uZXcgTWVzc2FnZUNoYW5uZWw7cC5wb3J0MS5vbm1lc3NhZ2U9Yz0+aSh0aGlzLG51bGwsZnVuY3Rpb24qKCl7bGV0e2RhdGE6Z309YztwLnBvcnQxLmNsb3NlKCksciYmKHlpZWxkIHYoLjEpLHRoaXMuaWZyYW1lLnN0eWxlLmRpc3BsYXk9XCJub25lXCIpLGcuc3VjY2Vzcz9kKGcuZGF0YSk6bChuZXcgRXJyb3IoZy5lcnJvcikpfSksKG09dGhpcy5pZnJhbWUuY29udGVudFdpbmRvdyk9PW51bGx8fG0ucG9zdE1lc3NhZ2Uoe2V2ZW50VHlwZTplLGRhdGE6dH0sYCR7UygpfSR7RX1gLFtwLnBvcnQyXSl9KX0pfWRlc3Ryb3koKXtHLmRlbGV0ZSh0aGlzLmlmcmFtZS5zcmMpfX07dmFyIF89Y2xhc3MgZXh0ZW5kcyBme2NvbnN0cnVjdG9yKHtjbGllbnRJZDp0LGN1c3RvbWl6YXRpb25PcHRpb25zOnJ9KXtzdXBlcih7aWZyYW1lSWQ6aWUsbGluazpyZSh7Y2xpZW50SWQ6dCxwYXRoOkUscXVlcnlQYXJhbXM6cn0pLmhyZWYsY29udGFpbmVyOmRvY3VtZW50LmJvZHl9KTt0aGlzLmNsaWVudElkPXR9b25JZnJhbWVMb2FkZWRJbml0VmFyaWFibGVzKCl7cmV0dXJuIGkodGhpcyxudWxsLGZ1bmN0aW9uKigpe2xldCB0PW5ldyBoKHtjbGllbnRJZDp0aGlzLmNsaWVudElkfSk7cmV0dXJue2F1dGhDb29raWU6eWllbGQgdC5nZXRBdXRoQ29va2llKCksZGV2aWNlU2hhcmVTdG9yZWQ6eWllbGQgdC5nZXREZXZpY2VTaGFyZSgpLHdhbGxldFVzZXJJZDp5aWVsZCB0LmdldFdhbGxldFVzZXJJZCgpLGNsaWVudElkOnRoaXMuY2xpZW50SWR9fSl9fTtmdW5jdGlvbiByZSh7Y2xpZW50SWQ6cyxwYXRoOmUscXVlcnlQYXJhbXM6dH0pe3ZhciBuO2xldCByPW5ldyBVUkwoZSx0ZSgpKTtpZih0KWZvcihsZXQgbyBvZiBPYmplY3Qua2V5cyh0KSlyLnNlYXJjaFBhcmFtcy5zZXQobywoKG49dFtvXSk9PW51bGw/dm9pZCAwOm4udG9TdHJpbmcoKSl8fFwiXCIpO3JldHVybiByLnNlYXJjaFBhcmFtcy5zZXQoXCJjbGllbnRJZFwiLHMpLHJ9dmFyIGllPVwicGFwZXItZW1iZWRkZWQtd2FsbGV0LWlmcmFtZVwiO2ltcG9ydHtnZXRQYXBlck9yaWdpblVybCBhcyBqfWZyb21cIkBwYXBlcnh5ei9zZGstY29tbW9uLXV0aWxpdGllc1wiO3ZhciBBPWNsYXNze2NvbnN0cnVjdG9yKHtxdWVyaWVyOmUscHJlTG9naW46dCxwb3N0TG9naW46cixjbGllbnRJZDpufSl7dGhpcy5Mb2dpblF1ZXJpZXI9ZSx0aGlzLnByZUxvZ2luPXQsdGhpcy5wb3N0TG9naW49cix0aGlzLmNsaWVudElkPW59c2VuZFBhcGVyRW1haWxMb2dpbk90cChyKXtyZXR1cm4gaSh0aGlzLGFyZ3VtZW50cyxmdW5jdGlvbiooe2VtYWlsOmUscmVjb3ZlcnlTaGFyZU1hbmFnZW1lbnQ6dH0pe3lpZWxkIHRoaXMucHJlTG9naW4oKTtsZXR7aXNOZXdVc2VyOm4saXNOZXdEZXZpY2U6byxyZWNvdmVyeVNoYXJlTWFuYWdlbWVudDphfT15aWVsZCB0aGlzLkxvZ2luUXVlcmllci5jYWxsKHtwcm9jZWR1cmVOYW1lOlwic2VuZFBhcGVyRW1haWxMb2dpbk90cFwiLHBhcmFtczp7ZW1haWw6ZSxyZWNvdmVyeVNoYXJlTWFuYWdlbWVudDp0fX0pO3JldHVybntpc05ld1VzZXI6bixpc05ld0RldmljZTpvLHJlY292ZXJ5U2hhcmVNYW5hZ2VtZW50OmF9fSl9fTt2YXIgQz1jbGFzcyBleHRlbmRzIEF7Y29uc3RydWN0b3IoKXtzdXBlciguLi5hcmd1bWVudHMpO3RoaXMuY2xvc2VXaW5kb3c9KHtpc1dpbmRvd09wZW5lZEJ5Rm46dCx3aW46cixjbG9zZU9wZW5lZFdpbmRvdzpufSk9Pnt0P3I9PW51bGx8fHIuY2xvc2UoKTpyJiZuP24ocik6ciYmci5jbG9zZSgpfX1sb2dpbldpdGhQYXBlck1vZGFsKCl7cmV0dXJuIGkodGhpcyxudWxsLGZ1bmN0aW9uKigpe3lpZWxkIHRoaXMucHJlTG9naW4oKTtsZXQgdD15aWVsZCB0aGlzLkxvZ2luUXVlcmllci5jYWxsKHtwcm9jZWR1cmVOYW1lOlwibG9naW5XaXRoUGFwZXJNb2RhbFwiLHBhcmFtczp7cmVjb3ZlcnlTaGFyZU1hbmFnZW1lbnQ6XCJBV1NfTUFOQUdFRFwifSxzaG93SWZyYW1lOiEwLGluamVjdFJlY292ZXJ5Q29kZTp7aXNJbmplY3RSZWNvdmVyeUNvZGU6ITB9fSk7cmV0dXJuIHRoaXMucG9zdExvZ2luKHQpfSl9Z2V0R29vZ2xlTG9naW5VcmwoKXtyZXR1cm4gaSh0aGlzLG51bGwsZnVuY3Rpb24qKCl7cmV0dXJuIHlpZWxkIHRoaXMuTG9naW5RdWVyaWVyLmNhbGwoe3Byb2NlZHVyZU5hbWU6XCJnZXRIZWFkbGVzc0dvb2dsZUxvZ2luTGlua1wiLHBhcmFtczp2b2lkIDB9KX0pfWxvZ2luV2l0aEdvb2dsZSh0KXtyZXR1cm4gaSh0aGlzLG51bGwsZnVuY3Rpb24qKCl7eWllbGQgdGhpcy5wcmVMb2dpbigpO2xldCByPXQ9PW51bGw/dm9pZCAwOnQub3BlbmVkV2luZG93LG49ITE7aWYocnx8KHI9d2luZG93Lm9wZW4oXCJcIixcIkxvZ2luXCIsXCJ3aWR0aD0zNTAsIGhlaWdodD01MDBcIiksbj0hMCksIXIpdGhyb3cgbmV3IEVycm9yKFwiU29tZXRoaW5nIHdlbnQgd3Jvbmcgb3BlbmluZyBwb3AtdXBcIik7eWllbGQgdGhpcy5wcmVMb2dpbigpO2xldHtsb2dpbkxpbms6b309eWllbGQgdGhpcy5nZXRHb29nbGVMb2dpblVybCgpO3IubG9jYXRpb24uaHJlZj1vO2xldCBhPXlpZWxkIG5ldyBQcm9taXNlKChkLGwpPT57bGV0IHA9d2luZG93LnNldEludGVydmFsKCgpPT5pKHRoaXMsbnVsbCxmdW5jdGlvbiooKXtyJiZyLmNsb3NlZCYmKGNsZWFySW50ZXJ2YWwocCksd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJtZXNzYWdlXCIsbSksbChuZXcgRXJyb3IoXCJVc2VyIGNsb3NlZCBsb2dpbiB3aW5kb3dcIikpKX0pLDFlMyksbT1jPT5pKHRoaXMsbnVsbCxmdW5jdGlvbiooKXtpZihjLm9yaWdpbj09PWooKSl7aWYodHlwZW9mIGMuZGF0YSE9XCJvYmplY3RcIil7bChuZXcgRXJyb3IoXCJJbnZhbGlkIGV2ZW50IGRhdGFcIikpO3JldHVybn1zd2l0Y2goYy5kYXRhLmV2ZW50VHlwZSl7Y2FzZVwidXNlckxvZ2luU3VjY2Vzc1wiOnt3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcihcIm1lc3NhZ2VcIixtKSxjbGVhckludGVydmFsKHApLHRoaXMuY2xvc2VXaW5kb3coe2lzV2luZG93T3BlbmVkQnlGbjpuLHdpbjpyLGNsb3NlT3BlbmVkV2luZG93OnQ9PW51bGw/dm9pZCAwOnQuY2xvc2VPcGVuZWRXaW5kb3d9KSxjLmRhdGEuYXV0aFJlc3VsdCYmZChjLmRhdGEuYXV0aFJlc3VsdCk7YnJlYWt9Y2FzZVwidXNlckxvZ2luRmFpbGVkXCI6e3dpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKFwibWVzc2FnZVwiLG0pLGNsZWFySW50ZXJ2YWwocCksdGhpcy5jbG9zZVdpbmRvdyh7aXNXaW5kb3dPcGVuZWRCeUZuOm4sd2luOnIsY2xvc2VPcGVuZWRXaW5kb3c6dD09bnVsbD92b2lkIDA6dC5jbG9zZU9wZW5lZFdpbmRvd30pLGwobmV3IEVycm9yKGMuZGF0YS5lcnJvcikpO2JyZWFrfWNhc2VcImluamVjdERldmVsb3BlckNsaWVudElkXCI6e3I9PW51bGx8fHIucG9zdE1lc3NhZ2Uoe2V2ZW50VHlwZTpcImluamVjdERldmVsb3BlckNsaWVudElkUmVzdWx0XCIsZGV2ZWxvcGVyQ2xpZW50SWQ6dGhpcy5jbGllbnRJZH0saigpKTticmVha319fX0pO3dpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwibWVzc2FnZVwiLG0pfSk7cmV0dXJuIHRoaXMucG9zdExvZ2luKHtzdG9yZWRUb2tlbjp5KHUoe30sYS5zdG9yZWRUb2tlbikse3Nob3VsZFN0b3JlQ29va2llU3RyaW5nOiEwfSksd2FsbGV0RGV0YWlsczp5KHUoe30sYS53YWxsZXREZXRhaWxzKSx7aXNJZnJhbWVTdG9yYWdlRW5hYmxlZDohMX0pfSl9KX1sb2dpbldpdGhQYXBlckVtYWlsT3RwKHIpe3JldHVybiBpKHRoaXMsYXJndW1lbnRzLGZ1bmN0aW9uKih7ZW1haWw6dH0pe3lpZWxkIHRoaXMucHJlTG9naW4oKTtsZXQgbj15aWVsZCB0aGlzLkxvZ2luUXVlcmllci5jYWxsKHtwcm9jZWR1cmVOYW1lOlwibG9naW5XaXRoUGFwZXJNb2RhbFwiLHBhcmFtczp7ZW1haWw6dCxyZWNvdmVyeVNoYXJlTWFuYWdlbWVudDpcIkFXU19NQU5BR0VEXCJ9LHNob3dJZnJhbWU6ITAsaW5qZWN0UmVjb3ZlcnlDb2RlOntpc0luamVjdFJlY292ZXJ5Q29kZTohMH19KTtyZXR1cm4gdGhpcy5wb3N0TG9naW4obil9KX12ZXJpZnlQYXBlckVtYWlsTG9naW5PdHAobil7cmV0dXJuIGkodGhpcyxhcmd1bWVudHMsZnVuY3Rpb24qKHtlbWFpbDp0LG90cDpyfSl7bGV0IG89eWllbGQgdGhpcy5Mb2dpblF1ZXJpZXIuY2FsbCh7cHJvY2VkdXJlTmFtZTpcInZlcmlmeVBhcGVyRW1haWxMb2dpbk90cFwiLHBhcmFtczp7ZW1haWw6dCxvdHA6cixyZWNvdmVyeVNoYXJlTWFuYWdlbWVudDpcIkFXU19NQU5BR0VEXCJ9LGluamVjdFJlY292ZXJ5Q29kZTp7aXNJbmplY3RSZWNvdmVyeUNvZGU6ITB9fSk7cmV0dXJuIHRoaXMucG9zdExvZ2luKG8pfSl9fTt2YXIgRD1jbGFzcyBleHRlbmRzIEF7bG9naW5XaXRoUGFwZXJNb2RhbChlKXtyZXR1cm4gaSh0aGlzLG51bGwsZnVuY3Rpb24qKCl7eWllbGQgdGhpcy5wcmVMb2dpbigpO2xldCB0PXlpZWxkIHRoaXMuTG9naW5RdWVyaWVyLmNhbGwoe3Byb2NlZHVyZU5hbWU6XCJsb2dpbldpdGhQYXBlck1vZGFsXCIscGFyYW1zOnZvaWQgMCxzaG93SWZyYW1lOiEwLGluamVjdFJlY292ZXJ5Q29kZTp7aXNJbmplY3RSZWNvdmVyeUNvZGU6ITAsZ2V0UmVjb3ZlcnlDb2RlOmU9PW51bGw/dm9pZCAwOmUuZ2V0UmVjb3ZlcnlDb2RlfX0pO3JldHVybiB0aGlzLnBvc3RMb2dpbih0KX0pfWxvZ2luV2l0aEdvb2dsZShlKXtyZXR1cm4gaSh0aGlzLG51bGwsZnVuY3Rpb24qKCl7dGhyb3cgbmV3IEVycm9yKFwibG9naW5XaXRoR29vZ2xlIGlzIG5vdCB5ZXQgc3VwcG9ydGVkIGluIHRoZSBSZWNvdmVyeVNoYXJlTWFuYWdlbWVudC5VU0VSX01BTkFHRUQgZmxvdy4gUGxlYXNlIHVzZSBSZWNvdmVyeVNoYXJlTWFuYWdlbWVudC5BV1NfTUFOQUdFRCBpbnN0ZWFkLlwiKX0pfWxvZ2luV2l0aFBhcGVyRW1haWxPdHAocil7cmV0dXJuIGkodGhpcyxhcmd1bWVudHMsZnVuY3Rpb24qKHtlbWFpbDplLHJlY292ZXJ5Q29kZTp0fSl7eWllbGQgdGhpcy5wcmVMb2dpbigpO2xldCBuPXlpZWxkIHRoaXMuTG9naW5RdWVyaWVyLmNhbGwoe3Byb2NlZHVyZU5hbWU6XCJsb2dpbldpdGhQYXBlck1vZGFsXCIscGFyYW1zOntlbWFpbDplLHJlY292ZXJ5Q29kZTp0fSxzaG93SWZyYW1lOiEwLGluamVjdFJlY292ZXJ5Q29kZTp7aXNJbmplY3RSZWNvdmVyeUNvZGU6ITB9fSk7cmV0dXJuIHRoaXMucG9zdExvZ2luKG4pfSl9dmVyaWZ5UGFwZXJFbWFpbExvZ2luT3RwKG4pe3JldHVybiBpKHRoaXMsYXJndW1lbnRzLGZ1bmN0aW9uKih7ZW1haWw6ZSxvdHA6dCxyZWNvdmVyeUNvZGU6cn0pe2xldCBvPXlpZWxkIHRoaXMuTG9naW5RdWVyaWVyLmNhbGwoe3Byb2NlZHVyZU5hbWU6XCJ2ZXJpZnlQYXBlckVtYWlsTG9naW5PdHBcIixwYXJhbXM6e2VtYWlsOmUsb3RwOnQscmVjb3ZlcnlDb2RlOnJ9LGluamVjdFJlY292ZXJ5Q29kZTp7aXNJbmplY3RSZWNvdmVyeUNvZGU6ITB9fSk7cmV0dXJuIHRoaXMucG9zdExvZ2luKG8pfSl9fTt2YXIgTT1jbGFzc3tjb25zdHJ1Y3Rvcih7Y2xpZW50SWQ6ZSxhZHZhbmNlZE9wdGlvbnM6dCxxdWVyaWVyOnIsb25BdXRoU3VjY2VzczpufSl7dmFyIG87dGhpcy5jbGllbnRJZD1lLHRoaXMuYWR2YW5jZWRPcHRpb25zPXtyZWNvdmVyeVNoYXJlTWFuYWdlbWVudDoobz10PT1udWxsP3ZvaWQgMDp0LnJlY292ZXJ5U2hhcmVNYW5hZ2VtZW50KSE9bnVsbD9vOlwiQVdTX01BTkFHRURcIn0sdGhpcy5BdXRoUXVlcmllcj1yLHRoaXMubG9jYWxTdG9yYWdlPW5ldyBoKHtjbGllbnRJZDplfSksdGhpcy5vbkF1dGhTdWNjZXNzPW4sdGhpcy51c2VyTWFuYWdlZExvZ2luPW5ldyBEKHtwb3N0TG9naW46YT0+aSh0aGlzLG51bGwsZnVuY3Rpb24qKCl7cmV0dXJuIHRoaXMucG9zdExvZ2luKGEpfSkscHJlTG9naW46KCk9PmkodGhpcyxudWxsLGZ1bmN0aW9uKigpe3lpZWxkIHRoaXMucHJlTG9naW4oKX0pLHF1ZXJpZXI6cixjbGllbnRJZDplfSksdGhpcy5hd3NNYW5hZ2VkTG9naW49bmV3IEMoe3Bvc3RMb2dpbjphPT5pKHRoaXMsbnVsbCxmdW5jdGlvbiooKXtyZXR1cm4gdGhpcy5wb3N0TG9naW4oYSl9KSxwcmVMb2dpbjooKT0+aSh0aGlzLG51bGwsZnVuY3Rpb24qKCl7eWllbGQgdGhpcy5wcmVMb2dpbigpfSkscXVlcmllcjpyLGNsaWVudElkOmV9KX1wcmVMb2dpbigpe3JldHVybiBpKHRoaXMsbnVsbCxmdW5jdGlvbiooKXt5aWVsZCB0aGlzLmxvZ291dCgpfSl9cG9zdExvZ2luKHIpe3JldHVybiBpKHRoaXMsYXJndW1lbnRzLGZ1bmN0aW9uKih7c3RvcmVkVG9rZW46ZSx3YWxsZXREZXRhaWxzOnR9KXtyZXR1cm4gZS5zaG91bGRTdG9yZUNvb2tpZVN0cmluZyYmKHlpZWxkIHRoaXMubG9jYWxTdG9yYWdlLnNhdmVBdXRoQ29va2llKGUuY29va2llU3RyaW5nKSkseWllbGQgdGhpcy5vbkF1dGhTdWNjZXNzKHtzdG9yZWRUb2tlbjplLHdhbGxldERldGFpbHM6dH0pfSl9bG9naW5XaXRoSnd0QXV0aChuKXtyZXR1cm4gaSh0aGlzLGFyZ3VtZW50cyxmdW5jdGlvbiooe3Rva2VuOmUsYXV0aFByb3ZpZGVyOnQscmVjb3ZlcnlDb2RlOnJ9KXt5aWVsZCB0aGlzLnByZUxvZ2luKCk7bGV0IG89eWllbGQgdGhpcy5BdXRoUXVlcmllci5jYWxsKHtwcm9jZWR1cmVOYW1lOlwibG9naW5XaXRoSnd0QXV0aENhbGxiYWNrXCIscGFyYW1zOnt0b2tlbjplLGF1dGhQcm92aWRlcjp0LHJlY292ZXJ5Q29kZTpyfX0pO3JldHVybiB0aGlzLnBvc3RMb2dpbihvKX0pfWxvZ2luV2l0aFBhcGVyTW9kYWwoZSl7cmV0dXJuIGkodGhpcyxudWxsLGZ1bmN0aW9uKigpe3JldHVybiB5aWVsZCB0aGlzLnByZUxvZ2luKCksdGhpcy5hZHZhbmNlZE9wdGlvbnMucmVjb3ZlcnlTaGFyZU1hbmFnZW1lbnQ9PT1cIkFXU19NQU5BR0VEXCI/dGhpcy5hd3NNYW5hZ2VkTG9naW4ubG9naW5XaXRoUGFwZXJNb2RhbCgpOnRoaXMudXNlck1hbmFnZWRMb2dpbi5sb2dpbldpdGhQYXBlck1vZGFsKGUpfSl9bG9naW5XaXRoUGFwZXJFbWFpbE90cChlKXtyZXR1cm4gaSh0aGlzLG51bGwsZnVuY3Rpb24qKCl7cmV0dXJuIHRoaXMuYWR2YW5jZWRPcHRpb25zLnJlY292ZXJ5U2hhcmVNYW5hZ2VtZW50PT09XCJBV1NfTUFOQUdFRFwiP3RoaXMuYXdzTWFuYWdlZExvZ2luLmxvZ2luV2l0aFBhcGVyRW1haWxPdHAoe2VtYWlsOmUuZW1haWx9KTp0aGlzLnVzZXJNYW5hZ2VkTG9naW4ubG9naW5XaXRoUGFwZXJFbWFpbE90cChlKX0pfWxvZ2luV2l0aEdvb2dsZShlKXtyZXR1cm4gaSh0aGlzLG51bGwsZnVuY3Rpb24qKCl7cmV0dXJuIHRoaXMuYWR2YW5jZWRPcHRpb25zLnJlY292ZXJ5U2hhcmVNYW5hZ2VtZW50PT09XCJBV1NfTUFOQUdFRFwiP3RoaXMuYXdzTWFuYWdlZExvZ2luLmxvZ2luV2l0aEdvb2dsZShlKTp0aGlzLnVzZXJNYW5hZ2VkTG9naW4ubG9naW5XaXRoR29vZ2xlKCl9KX1zZW5kUGFwZXJFbWFpbExvZ2luT3RwKHQpe3JldHVybiBpKHRoaXMsYXJndW1lbnRzLGZ1bmN0aW9uKih7ZW1haWw6ZX0pe3JldHVybiB0aGlzLmFkdmFuY2VkT3B0aW9ucy5yZWNvdmVyeVNoYXJlTWFuYWdlbWVudD09PVwiQVdTX01BTkFHRURcIj90aGlzLmF3c01hbmFnZWRMb2dpbi5zZW5kUGFwZXJFbWFpbExvZ2luT3RwKHtlbWFpbDplLHJlY292ZXJ5U2hhcmVNYW5hZ2VtZW50OlwiQVdTX01BTkFHRURcIn0pOnRoaXMudXNlck1hbmFnZWRMb2dpbi5zZW5kUGFwZXJFbWFpbExvZ2luT3RwKHtlbWFpbDplfSl9KX12ZXJpZnlQYXBlckVtYWlsTG9naW5PdHAoZSl7cmV0dXJuIGkodGhpcyxudWxsLGZ1bmN0aW9uKigpe3JldHVybiB0aGlzLmFkdmFuY2VkT3B0aW9ucy5yZWNvdmVyeVNoYXJlTWFuYWdlbWVudD09PVwiQVdTX01BTkFHRURcIj90aGlzLmF3c01hbmFnZWRMb2dpbi52ZXJpZnlQYXBlckVtYWlsTG9naW5PdHAoZSk6dGhpcy51c2VyTWFuYWdlZExvZ2luLnZlcmlmeVBhcGVyRW1haWxMb2dpbk90cChlKX0pfWxvZ291dCgpe3JldHVybiBpKHRoaXMsbnVsbCxmdW5jdGlvbiooKXtsZXR7c3VjY2VzczplfT15aWVsZCB0aGlzLkF1dGhRdWVyaWVyLmNhbGwoe3Byb2NlZHVyZU5hbWU6XCJsb2dvdXRcIixwYXJhbXM6dm9pZCAwfSksdD15aWVsZCB0aGlzLmxvY2FsU3RvcmFnZS5yZW1vdmVBdXRoQ29va2llKCkscj15aWVsZCB0aGlzLmxvY2FsU3RvcmFnZS5yZW1vdmVXYWxsZXRVc2VySWQoKTtyZXR1cm57c3VjY2VzczplfHx0fHxyfX0pfX07aW1wb3J0e2dldERlZmF1bHRQcm92aWRlciBhcyBvZX1mcm9tXCJAZXRoZXJzcHJvamVjdC9wcm92aWRlcnNcIjtpbXBvcnR7Q2hhaW5Ub1B1YmxpY1JwYyBhcyBzZX1mcm9tXCJAcGFwZXJ4eXovc2RrLWNvbW1vbi11dGlsaXRpZXNcIjt2YXIgdz1jbGFzc3tjb25zdHJ1Y3Rvcih7Y2hhaW46ZSxjbGllbnRJZDp0LHF1ZXJpZXI6cn0pe3RoaXMuY2hhaW49ZSx0aGlzLmNsaWVudElkPXQsdGhpcy5nYXNsZXNzVHJhbnNhY3Rpb25RdWVyaWVyPXJ9Y2FsbENvbnRyYWN0KG4pe3JldHVybiBpKHRoaXMsYXJndW1lbnRzLGZ1bmN0aW9uKih7Y29udHJhY3RBZGRyZXNzOmUsbWV0aG9kQXJnczp0LG1ldGhvZEludGVyZmFjZTpyfSl7cmV0dXJuIHlpZWxkIHRoaXMuZ2FzbGVzc1RyYW5zYWN0aW9uUXVlcmllci5jYWxsKHtwcm9jZWR1cmVOYW1lOlwiY2FsbENvbnRyYWN0XCIscGFyYW1zOntjaGFpbjp0aGlzLmNoYWluLGNvbnRyYWN0QWRkcmVzczplLG1ldGhvZDp7YXJnczp0LHN0dWI6cn19fSl9KX19O2ltcG9ydHtTaWduZXIgYXMgbmV9ZnJvbVwiQGV0aGVyc3Byb2plY3QvYWJzdHJhY3Qtc2lnbmVyXCI7aW1wb3J0e2RlZmluZVJlYWRPbmx5IGFzIGFlfWZyb21cIkBldGhlcnNwcm9qZWN0L3Byb3BlcnRpZXNcIjt2YXIgVD1jbGFzcyBleHRlbmRzIG5le2NvbnN0cnVjdG9yKHtwcm92aWRlcjp0LGNsaWVudElkOnIscXVlcmllcjpufSl7dmFyIG87c3VwZXIoKTt0aGlzLkRFRkFVTFRfRVRIRVJFVU1fQ0hBSU5fSUQ9NTt0aGlzLmNsaWVudElkPXIsdGhpcy5xdWVyaWVyPW4sdGhpcy5lbmRwb2ludD0obz10LmNvbm5lY3Rpb24pPT1udWxsP3ZvaWQgMDpvLnVybCxhZSh0aGlzLFwicHJvdmlkZXJcIix0KX1nZXRBZGRyZXNzKCl7cmV0dXJuIGkodGhpcyxudWxsLGZ1bmN0aW9uKigpe2xldHthZGRyZXNzOnR9PXlpZWxkIHRoaXMucXVlcmllci5jYWxsKHtwcm9jZWR1cmVOYW1lOlwiZ2V0QWRkcmVzc1wiLHBhcmFtczp2b2lkIDB9KTtyZXR1cm4gdH0pfXNpZ25NZXNzYWdlKHQpe3JldHVybiBpKHRoaXMsbnVsbCxmdW5jdGlvbiooKXt2YXIgbyxhLGQsbDtsZXQgcj15aWVsZChvPXRoaXMucHJvdmlkZXIpPT1udWxsP3ZvaWQgMDpvLmdldE5ldHdvcmsoKTtyJiZyLl9kZWZhdWx0UHJvdmlkZXI7bGV0e3NpZ25lZE1lc3NhZ2U6bn09eWllbGQgdGhpcy5xdWVyaWVyLmNhbGwoe3Byb2NlZHVyZU5hbWU6XCJzaWduTWVzc2FnZVwiLHBhcmFtczp7bWVzc2FnZTp0LGNoYWluSWQ6KGw9KGQ9eWllbGQoYT10aGlzLnByb3ZpZGVyKT09bnVsbD92b2lkIDA6YS5nZXROZXR3b3JrKCkpPT1udWxsP3ZvaWQgMDpkLmNoYWluSWQpIT1udWxsP2w6dGhpcy5ERUZBVUxUX0VUSEVSRVVNX0NIQUlOX0lELHJwY0VuZHBvaW50OnRoaXMuZW5kcG9pbnR9fSk7cmV0dXJuIG59KX1zaWduVHJhbnNhY3Rpb24odCl7cmV0dXJuIGkodGhpcyxudWxsLGZ1bmN0aW9uKigpe3ZhciBuLG8sYTtsZXR7c2lnbmVkVHJhbnNhY3Rpb246cn09eWllbGQgdGhpcy5xdWVyaWVyLmNhbGwoe3Byb2NlZHVyZU5hbWU6XCJzaWduVHJhbnNhY3Rpb25cIixwYXJhbXM6e3RyYW5zYWN0aW9uOnQsY2hhaW5JZDooYT0obz15aWVsZChuPXRoaXMucHJvdmlkZXIpPT1udWxsP3ZvaWQgMDpuLmdldE5ldHdvcmsoKSk9PW51bGw/dm9pZCAwOm8uY2hhaW5JZCkhPW51bGw/YTp0aGlzLkRFRkFVTFRfRVRIRVJFVU1fQ0hBSU5fSUQscnBjRW5kcG9pbnQ6dGhpcy5lbmRwb2ludH19KTtyZXR1cm4gcn0pfV9zaWduVHlwZWREYXRhKHQscixuKXtyZXR1cm4gaSh0aGlzLG51bGwsZnVuY3Rpb24qKCl7dmFyIGEsZCxsO2xldHtzaWduZWRUeXBlZERhdGE6b309eWllbGQgdGhpcy5xdWVyaWVyLmNhbGwoe3Byb2NlZHVyZU5hbWU6XCJzaWduVHlwZWREYXRhVjRcIixwYXJhbXM6e2RvbWFpbjp0LHR5cGVzOnIsbWVzc2FnZTpuLGNoYWluSWQ6KGw9KGQ9eWllbGQoYT10aGlzLnByb3ZpZGVyKT09bnVsbD92b2lkIDA6YS5nZXROZXR3b3JrKCkpPT1udWxsP3ZvaWQgMDpkLmNoYWluSWQpIT1udWxsP2w6dGhpcy5ERUZBVUxUX0VUSEVSRVVNX0NIQUlOX0lELHJwY0VuZHBvaW50OnRoaXMuZW5kcG9pbnR9fSk7cmV0dXJuIG99KX1jb25uZWN0KHQpe3JldHVybiBuZXcgVCh7Y2xpZW50SWQ6dGhpcy5jbGllbnRJZCxwcm92aWRlcjp0LHF1ZXJpZXI6dGhpcy5xdWVyaWVyfSl9fTt2YXIgTz1jbGFzc3tjb25zdHJ1Y3Rvcih7Y2xpZW50SWQ6ZSxjaGFpbjp0LHF1ZXJpZXI6cn0pe3RoaXMuY2xpZW50SWQ9ZSx0aGlzLmNoYWluPXQsdGhpcy53YWxsZXRNYW5hZ2VyUXVlcmllcj1yLHRoaXMuZ2FzbGVzcz1uZXcgdyh7Y2hhaW46dCxjbGllbnRJZDplLHF1ZXJpZXI6cn0pLHRoaXMubG9jYWxTdG9yYWdlPW5ldyBoKHtjbGllbnRJZDplfSl9cG9zdFdhbGxldFNldFVwKG8pe3JldHVybiBpKHRoaXMsYXJndW1lbnRzLGZ1bmN0aW9uKih7ZGV2aWNlU2hhcmVTdG9yZWQ6ZSx3YWxsZXRBZGRyZXNzOnQsaXNJZnJhbWVTdG9yYWdlRW5hYmxlZDpyLHdhbGxldFVzZXJJZDpufSl7cmV0dXJuIHJ8fCh5aWVsZCB0aGlzLmxvY2FsU3RvcmFnZS5zYXZlRGV2aWNlU2hhcmUoZSxuKSkse3dhbGxldEFkZHJlc3M6dH19KX1nZXRVc2VyV2FsbGV0U3RhdHVzKCl7cmV0dXJuIGkodGhpcyxudWxsLGZ1bmN0aW9uKigpe2xldCBlPXlpZWxkIHRoaXMud2FsbGV0TWFuYWdlclF1ZXJpZXIuY2FsbCh7cHJvY2VkdXJlTmFtZTpcImdldFVzZXJTdGF0dXNcIixwYXJhbXM6dm9pZCAwfSk7cmV0dXJuIGUuc3RhdHVzPT09XCJMb2dnZWQgSW4sIFdhbGxldCBJbml0aWFsaXplZFwiP3tzdGF0dXM6XCJMb2dnZWQgSW4sIFdhbGxldCBJbml0aWFsaXplZFwiLHVzZXI6eSh1KHt9LGUudXNlcikse3dhbGxldDp0aGlzfSl9OmV9KX1zZXRDaGFpbih0KXtyZXR1cm4gaSh0aGlzLGFyZ3VtZW50cyxmdW5jdGlvbiooe2NoYWluOmV9KXt0aGlzLmNoYWluPWUsdGhpcy5nYXNsZXNzPW5ldyB3KHtjaGFpbjplLGNsaWVudElkOnRoaXMuY2xpZW50SWQscXVlcmllcjp0aGlzLndhbGxldE1hbmFnZXJRdWVyaWVyfSl9KX1nZXRFdGhlcnNKc1NpZ25lcihlKXtyZXR1cm4gaSh0aGlzLG51bGwsZnVuY3Rpb24qKCl7dmFyIHI7cmV0dXJuIG5ldyBUKHtjbGllbnRJZDp0aGlzLmNsaWVudElkLHByb3ZpZGVyOm9lKChyPWU9PW51bGw/dm9pZCAwOmUucnBjRW5kcG9pbnQpIT1udWxsP3I6c2VbdGhpcy5jaGFpbl0pLHF1ZXJpZXI6dGhpcy53YWxsZXRNYW5hZ2VyUXVlcmllcn0pfSl9fTt2YXIgTj1jbGFzc3tjb25zdHJ1Y3Rvcih7Y2xpZW50SWQ6ZSxjaGFpbjp0LHN0eWxlczpyLGFkdmFuY2VkT3B0aW9uczpufSl7dGhpcy5jbGllbnRJZD1lLHRoaXMucXVlcmllcj1uZXcgXyh7Y2xpZW50SWQ6ZSxjdXN0b21pemF0aW9uT3B0aW9uczpyfSksdGhpcy53YWxsZXQ9bmV3IE8oe2NsaWVudElkOmUsY2hhaW46dCxxdWVyaWVyOnRoaXMucXVlcmllcn0pLHRoaXMuYXV0aD1uZXcgTSh7Y2xpZW50SWQ6ZSxhZHZhbmNlZE9wdGlvbnM6dSh7cmVjb3ZlcnlTaGFyZU1hbmFnZW1lbnQ6XCJVU0VSX01BTkFHRURcIn0sbiE9bnVsbD9uOnt9KSxxdWVyaWVyOnRoaXMucXVlcmllcixvbkF1dGhTdWNjZXNzOm89PmkodGhpcyxudWxsLGZ1bmN0aW9uKigpe3JldHVybiB5aWVsZCB0aGlzLndhbGxldC5wb3N0V2FsbGV0U2V0VXAoeSh1KHt9LG8ud2FsbGV0RGV0YWlscykse3dhbGxldFVzZXJJZDpvLnN0b3JlZFRva2VuLmF1dGhEZXRhaWxzLnVzZXJXYWxsZXRJZH0pKSx5aWVsZCB0aGlzLnF1ZXJpZXIuY2FsbCh7cHJvY2VkdXJlTmFtZTpcImluaXRJZnJhbWVcIixwYXJhbXM6e2RldmljZVNoYXJlU3RvcmVkOm8ud2FsbGV0RGV0YWlscy5kZXZpY2VTaGFyZVN0b3JlZCxjbGllbnRJZDp0aGlzLmNsaWVudElkLHdhbGxldFVzZXJJZDpvLnN0b3JlZFRva2VuLmF1dGhEZXRhaWxzLnVzZXJXYWxsZXRJZCxhdXRoQ29va2llOm8uc3RvcmVkVG9rZW4uY29va2llU3RyaW5nfX0pLHt1c2VyOntzdGF0dXM6XCJMb2dnZWQgSW4sIFdhbGxldCBJbml0aWFsaXplZFwiLGF1dGhEZXRhaWxzOm8uc3RvcmVkVG9rZW4uYXV0aERldGFpbHMsd2FsbGV0OnRoaXMud2FsbGV0LHdhbGxldEFkZHJlc3M6by53YWxsZXREZXRhaWxzLndhbGxldEFkZHJlc3N9fX0pfSl9Z2V0VXNlcigpe3JldHVybiBpKHRoaXMsbnVsbCxmdW5jdGlvbiooKXtsZXQgZT15aWVsZCB0aGlzLndhbGxldC5nZXRVc2VyV2FsbGV0U3RhdHVzKCk7c3dpdGNoKGUuc3RhdHVzKXtjYXNlXCJMb2dnZWQgSW4sIE5ldyBEZXZpY2VcIjpjYXNlXCJMb2dnZWQgSW4sIFdhbGxldCBVbmluaXRpYWxpemVkXCI6cmV0dXJuIHlpZWxkIHRoaXMuYXV0aC5sb2dvdXQoKSx0aGlzLmdldFVzZXIoKTtjYXNlXCJMb2dnZWQgT3V0XCI6cmV0dXJue3N0YXR1czpcIkxvZ2dlZCBPdXRcIn07Y2FzZVwiTG9nZ2VkIEluLCBXYWxsZXQgSW5pdGlhbGl6ZWRcIjpyZXR1cm4gdSh7c3RhdHVzOlwiTG9nZ2VkIEluLCBXYWxsZXQgSW5pdGlhbGl6ZWRcIn0sZS51c2VyKX19KX19O2V4cG9ydHtJIGFzIEFVVEhfVE9LRU5fTE9DQUxfU1RPUkFHRV9OQU1FLFkgYXMgQXV0aFByb3ZpZGVyLFcgYXMgREVWSUNFX1NIQVJFX0xPQ0FMX1NUT1JBR0VfTkFNRSxYIGFzIERFVklDRV9TSEFSRV9MT0NBTF9TVE9SQUdFX05BTUVfREVQUkVDQVRFRCxOIGFzIFBhcGVyRW1iZWRkZWRXYWxsZXRTZGssUiBhcyBSZWNvdmVyeVNoYXJlTWFuYWdlbWVudCxIIGFzIFVzZXJTdGF0dXMsUCBhcyBVc2VyV2FsbGV0U3RhdHVzLEogYXMgV0FMTEVUX1VTRVJfREVUQUlMU19MT0NBTF9TVE9SQUdFX05BTUUsTCBhcyBXQUxMRVRfVVNFUl9JRF9MT0NBTF9TVE9SQUdFX05BTUV9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aW5kZXgubWpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(app-pages-browser)/./node_modules/@paperxyz/embedded-wallet-service-sdk/dist/index.mjs\n"));

/***/ })

}]);